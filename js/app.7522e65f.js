(function(){var t={6700:function(t,e,a){var i={"./af":2398,"./af.js":2398,"./ar":4207,"./ar-dz":3382,"./ar-dz.js":3382,"./ar-kw":6525,"./ar-kw.js":6525,"./ar-ly":7098,"./ar-ly.js":7098,"./ar-ma":6483,"./ar-ma.js":6483,"./ar-sa":3961,"./ar-sa.js":3961,"./ar-tn":7401,"./ar-tn.js":7401,"./ar.js":4207,"./az":903,"./az.js":903,"./be":1174,"./be.js":1174,"./bg":4615,"./bg.js":4615,"./bm":225,"./bm.js":225,"./bn":9751,"./bn-bd":544,"./bn-bd.js":544,"./bn.js":9751,"./bo":6894,"./bo.js":6894,"./br":8566,"./br.js":8566,"./bs":959,"./bs.js":959,"./ca":2683,"./ca.js":2683,"./cs":4231,"./cs.js":4231,"./cv":999,"./cv.js":999,"./cy":4302,"./cy.js":4302,"./da":3601,"./da.js":3601,"./de":5509,"./de-at":2479,"./de-at.js":2479,"./de-ch":5948,"./de-ch.js":5948,"./de.js":5509,"./dv":9838,"./dv.js":9838,"./el":5113,"./el.js":5113,"./en-au":7377,"./en-au.js":7377,"./en-ca":9626,"./en-ca.js":9626,"./en-gb":5912,"./en-gb.js":5912,"./en-ie":2931,"./en-ie.js":2931,"./en-il":2243,"./en-il.js":2243,"./en-in":9779,"./en-in.js":9779,"./en-nz":9813,"./en-nz.js":9813,"./en-sg":4318,"./en-sg.js":4318,"./eo":4957,"./eo.js":4957,"./es":9243,"./es-do":7409,"./es-do.js":7409,"./es-mx":5188,"./es-mx.js":5188,"./es-us":6927,"./es-us.js":6927,"./es.js":9243,"./et":7731,"./et.js":7731,"./eu":1072,"./eu.js":1072,"./fa":9462,"./fa.js":9462,"./fi":3368,"./fi.js":3368,"./fil":3626,"./fil.js":3626,"./fo":6421,"./fo.js":6421,"./fr":974,"./fr-ca":7780,"./fr-ca.js":7780,"./fr-ch":9719,"./fr-ch.js":9719,"./fr.js":974,"./fy":8373,"./fy.js":8373,"./ga":3861,"./ga.js":3861,"./gd":4896,"./gd.js":4896,"./gl":739,"./gl.js":739,"./gom-deva":6737,"./gom-deva.js":6737,"./gom-latn":1979,"./gom-latn.js":1979,"./gu":2001,"./gu.js":2001,"./he":9671,"./he.js":9671,"./hi":2038,"./hi.js":2038,"./hr":1228,"./hr.js":1228,"./hu":87,"./hu.js":87,"./hy-am":3569,"./hy-am.js":3569,"./id":1977,"./id.js":1977,"./is":6853,"./is.js":6853,"./it":7859,"./it-ch":5626,"./it-ch.js":5626,"./it.js":7859,"./ja":4123,"./ja.js":4123,"./jv":6457,"./jv.js":6457,"./ka":638,"./ka.js":638,"./kk":6823,"./kk.js":6823,"./km":9493,"./km.js":9493,"./kn":1288,"./kn.js":1288,"./ko":9663,"./ko.js":9663,"./ku":805,"./ku.js":805,"./ky":7550,"./ky.js":7550,"./lb":6272,"./lb.js":6272,"./lo":9135,"./lo.js":9135,"./lt":1452,"./lt.js":1452,"./lv":5782,"./lv.js":5782,"./me":2181,"./me.js":2181,"./mi":258,"./mi.js":258,"./mk":5715,"./mk.js":5715,"./ml":538,"./ml.js":538,"./mn":3086,"./mn.js":3086,"./mr":5663,"./mr.js":5663,"./ms":5100,"./ms-my":2663,"./ms-my.js":2663,"./ms.js":5100,"./mt":880,"./mt.js":880,"./my":9099,"./my.js":9099,"./nb":8709,"./nb.js":8709,"./ne":2201,"./ne.js":2201,"./nl":1016,"./nl-be":1681,"./nl-be.js":1681,"./nl.js":1016,"./nn":5330,"./nn.js":5330,"./oc-lnc":7132,"./oc-lnc.js":7132,"./pa-in":251,"./pa-in.js":251,"./pl":3948,"./pl.js":3948,"./pt":9836,"./pt-br":8831,"./pt-br.js":8831,"./pt.js":9836,"./ro":8443,"./ro.js":8443,"./ru":4,"./ru.js":4,"./sd":4510,"./sd.js":4510,"./se":3148,"./se.js":3148,"./si":542,"./si.js":542,"./sk":7637,"./sk.js":7637,"./sl":5852,"./sl.js":5852,"./sq":611,"./sq.js":611,"./sr":242,"./sr-cyrl":302,"./sr-cyrl.js":302,"./sr.js":242,"./ss":1367,"./ss.js":1367,"./sv":2927,"./sv.js":2927,"./sw":5240,"./sw.js":5240,"./ta":2692,"./ta.js":2692,"./te":2132,"./te.js":2132,"./tet":8300,"./tet.js":8300,"./tg":7211,"./tg.js":7211,"./th":4050,"./th.js":4050,"./tk":3849,"./tk.js":3849,"./tl-ph":3964,"./tl-ph.js":3964,"./tlh":3650,"./tlh.js":3650,"./tr":4195,"./tr.js":4195,"./tzl":5529,"./tzl.js":5529,"./tzm":7520,"./tzm-latn":298,"./tzm-latn.js":298,"./tzm.js":7520,"./ug-cn":4134,"./ug-cn.js":4134,"./uk":5456,"./uk.js":5456,"./ur":5679,"./ur.js":5679,"./uz":9277,"./uz-latn":6446,"./uz-latn.js":6446,"./uz.js":9277,"./vi":3992,"./vi.js":3992,"./x-pseudo":8882,"./x-pseudo.js":8882,"./yo":2899,"./yo.js":2899,"./zh-cn":4017,"./zh-cn.js":4017,"./zh-hk":4831,"./zh-hk.js":4831,"./zh-mo":2881,"./zh-mo.js":2881,"./zh-tw":57,"./zh-tw.js":57};function s(t){var e=n(t);return a(e)}function n(t){if(!a.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}s.keys=function(){return Object.keys(i)},s.resolve=n,t.exports=s,s.id=6700},7278:function(t,e,a){"use strict";var i=a(1357),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{dark:t.dark}},[a("NavDrawer",{attrs:{app:""}}),a("Toolbar",{on:{onSettingsDialog:t.onSettingsDialog}}),a("v-main",[a("v-fade-transition",{attrs:{mode:"out-in"}},[a("router-view")],1)],1),a("SettingsDialog"),a("Loading",{attrs:{loading:t.appLoading}})],1)},n=[],o=a(4665),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app-bar",{attrs:{app:"",dark:t.dark}},[a("v-toolbar-title",[a("router-link",{class:"toolbar-title"+(t.dark?"-dark":""),attrs:{to:"/"}},[a("v-icon",[t._v("mdi-web")]),t._v(" metaspan.io")],1)],1),a("v-spacer"),a("v-toolbar-items",[a("v-btn",{attrs:{text:"",to:"/"+t.chainId+"/pool"}},[a("v-icon",[t._v("mdi-waves")]),a("span",{staticClass:"d-none d-sm-inline"},[t._v("Pools")])],1),a("v-btn",{attrs:{text:"",to:"/"+t.chainId+"/candidate"}},[a("span",{staticClass:"d-none d-sm-inline"},[a("v-icon",[t._v("mdi-basketball")])],1),t._v("1KV ")]),a("ChainMenu")],1),a("v-spacer"),a("v-tooltip",{scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("v-btn",t._g(t._b({attrs:{small:"",icon:""}},"v-btn",s,!1),i),[a("v-icon",{attrs:{color:t.apiConnected?"primary":""}},[t._v("mdi-api"+t._s(t.apiConnected?"":"-off"))])],1)]}}])},[a("span",[t._v("API connected: "+t._s(t.apiConnected?"yes":"no"))])]),a("Alerts"),a("v-app-bar-nav-icon",{on:{click:function(e){return t.toggleNavBar()}}})],1)},c=[],l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"text-none",attrs:{text:""}},"v-btn",s,!1),i),[a("v-img",{attrs:{src:t.icon,width:"24px",height:"24px"}}),a("span",{staticClass:"d-none d-sm-inline"},[t._v(" "+t._s(t.chain.name))]),t._v(" "),a("v-icon",[t._v("mdi-chevron-down")])],1)]}}])},[a("v-list",t._l(t.chains,(function(e,i){return a("v-list-item",{key:i,attrs:{"input-value":e.id===t.chainId},on:{click:function(a){return t.setChain(e)}}},[a("v-list-item-title",[t._v(t._s(e.name))])],1)})),1)],1)},d=[],h=i["default"].extend({name:"ChainMenu",computed:{...(0,o.rn)(["chainId","chains"]),icon(){return this.icons[this.chainId]},chain(){return this.chains[this.chainId]||{}}},data(){return{icons:{kusama:a(666),polkadot:a(3395)}}},methods:{setChain(t){console.debug("setChain",t.id),this.$store.dispatch("setChain",t.id)}}}),u=h,m=a(1001),v=(0,m.Z)(u,l,d,!1,null,null,null),p=v.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-menu",{attrs:{"offset-y":"",right:"","close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("v-btn",t._g(t._b({attrs:{small:"",icon:""}},"v-btn",s,!1),i),[a("v-badge",{attrs:{content:t.alerts.length,value:t.alerts.length,bordered:"",overlap:""}},[a("v-icon",{attrs:{color:t.alerts.length>0?"primary":""}},[t._v("mdi-bell")])],1)],1)]}}])},[a("v-list",[t._l(t.alerts,(function(e){return a("v-list-item",{key:e.id},[a("v-list-item-icon",[a("v-icon",{attrs:{color:e.type}},[t._v("mdi-alert")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(e.title))]),a("v-list-item-subtitle",[t._v(t._s(e.text))])],1),a("v-list-item-action",[a("v-btn",{attrs:{small:"",icon:""},on:{click:function(a){return t.delAlert(e)}}},[a("v-icon",[t._v("mdi-close")])],1)],1)],1)})),a("v-list-item",{directives:[{name:"show",rawName:"v-show",value:0===t.alerts.length,expression:"alerts.length===0"}]},[t._v(" No alerts ")])],2)],1)},f=[],_=a(7318),b=a.n(_),I=i["default"].extend({name:"Alerts",computed:{...(0,o.rn)(["alerts"])},data(){return{snackbar:!1,text:"",timeout:2e3}},watch:{alerts:{deep:!0,handler(t,e){console.debug(t,e),t.forEach((t=>{e.find((e=>e.id===t.id))||(console.debug("new",t),this.text=t.text,this.snackbar=!0)}))}}},methods:{test(t){this.$store.dispatch("addAlert",{id:b()().valueOf(),type:t,text:"this is a test"})},delAlert(t){this.$store.dispatch("clearAlert",t)}}}),w=I,y=(0,m.Z)(w,g,f,!1,null,null,null),k=y.exports,S=i["default"].extend({components:{Alerts:k,ChainMenu:p},computed:{...(0,o.rn)({chainId:"chainId",dark:"dark",settingsDialog:"showSettingsDialog"}),...(0,o.Se)("substrate",{apiConnected:"connected"})},data(){return{showSettingsDialog:!1}},watch:{settingsDialog(t){this.showSettingsDialog=t},showSettingsDialog(t){this.$emit("onSettingsDialog",t),this.$store.dispatch("setShowSettingsDialog",t)}},methods:{toggleNavBar(){this.$store.dispatch("toggleNavBar")}},mounted(){}}),x=S,C=(0,m.Z)(x,r,c,!1,null,"04c77892",null),T=C.exports,E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{scrollable:"","max-width":"800px"},model:{value:t.showSettingsDialog,callback:function(e){t.showSettingsDialog=e},expression:"showSettingsDialog"}},[a("v-card",[a("v-app-bar",[t._v("Settings")]),a("v-card-text",[a("v-radio-group",{attrs:{loading:t.loading,label:"Endpoint"},model:{value:t.rad_endpoint,callback:function(e){t.rad_endpoint=e},expression:"rad_endpoint"}},t._l(t.kusamaEndpoints,(function(t){return a("v-radio",{key:t.id,attrs:{value:t.id,label:t.url}})})),1)],1)],1)],1)},A=[],$=i["default"].extend({computed:{...(0,o.Se)("polkadot",["kusamaEndpoints"]),...(0,o.rn)({settingsDialog:"showSettingsDialog"})},data(){return{showSettingsDialog:!1,loading:!1,rad_endpoint:null}},watch:{settingsDialog(t){this.showSettingsDialog=t},showSettingsDialog(t){this.$store.dispatch("setShowSettingsDialog",t)},rad_endpoint(t){console.warn("DEPRICATED: rad_endpoint()"),this.$store.dispatch("polkadot/setEndpoint",t)}},created(){this.rad_endpoint=this.$store.state.polkadot.endpoint,this.showSettingsDialog=this.$store.state.showSettingsDialog}}),j=$,D=(0,m.Z)(j,E,A,!1,null,null,null),L=D.exports,N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-navigation-drawer",{attrs:{absolute:"",right:"",temporary:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("v-toolbar",[a("v-toolbar-title",[t._v("Menu")]),a("v-spacer"),a("v-btn",{attrs:{small:"",icon:""},on:{click:function(e){t.drawer=!1}}},[a("v-icon",[t._v("mdi-close")])],1)],1),a("v-list",[a("v-list-item",{on:{click:function(e){return t.resetCache()}}},[a("v-list-item-title",[t._v("Reset cache")])],1)],1)],1)},O=[],P=i["default"].extend({name:"NavDrawer",computed:{...(0,o.rn)(["showNavBar"])},data(){return{drawer:!1}},watch:{showNavBar(t){this.drawer=t},drawer(t){this.$store.dispatch("showNavBar",t)}},methods:{resetCache(){this.$store.dispatch("resetCache")}}}),F=P,R=(0,m.Z)(F,N,O,!1,null,null,null),V=R.exports,M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-fade-transition",[a("v-overlay",{attrs:{value:t.loading,absolute:t.absolute}},[a("v-container",{attrs:{fluid:""}},[a("v-progress-circular",{attrs:{size:t.size,color:"primary",indeterminate:""}})],1)],1)],1)},Z=[],B=i["default"].extend({name:"Loading",props:{loading:{type:Boolean,required:!0},size:{type:Number,required:!1,default:150},absolute:{type:Boolean,required:!1,default:!1}}}),G=B,q=(0,m.Z)(G,M,Z,!1,null,"35e7b04e",null),z=q.exports,H=i["default"].extend({name:"App",components:{Toolbar:T,SettingsDialog:L,NavDrawer:V,Loading:z},computed:{...(0,o.rn)(["dark","showSettingsDialog"]),...(0,o.rn)("polkadot",["loading"]),...(0,o.rn)({chains:"chains",appLoading:"loading"})},data(){return{settingsDialog:!1,matcher:null}},watch:{},methods:{onSettingsDialog(t){this.settingsDialog=t},onDark(t){this.$store.dispatch("setDark",t.matches)}},async created(){console.debug("App.vue: created"),this.matcher=window.matchMedia("(prefers-color-scheme: dark)"),this.matcher.addListener(this.onDark),this.onDark(this.matcher),Object.keys(this.chains).forEach((async t=>{const e=await this.$substrate.connect(t);await this.$store.dispatch("substrate/setChainInfo",{chainId:t,chainInfo:e})})),this.$store.dispatch("init")},async mounted(){console.debug("App.vue: mounted")}}),Y=H,U=(0,m.Z)(Y,s,n,!1,null,"49158ecf",null),K=U.exports,J=a(2809),W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-card",{staticClass:"my-card"},[a("v-card-title",[t._v("metaspan.io - tools")]),a("v-card-text",[a("p",[t._v("Here you will find various tools and utilities for blockchain-related applications.")]),a("p",[t._v("The tools are open source, and the code can be found on github, "),a("a",{attrs:{href:"https://github.com/metaspan",target:"_blank"}},[t._v("here")])])])],1),a("v-card",{staticClass:"my-card",attrs:{elevation:"1"}},[a("v-card-title",[t._v("Featured dApp: metaspan.io - kusama 1kv")]),a("v-card-text",[a("p",[t._v("Kusama 1KV (1000 validators)")]),a("p",[a("router-link",{attrs:{to:"/kusama/candidate"}},[t._v("Candidates")])],1)])],1),a("v-card",{staticClass:"my-card",attrs:{elevation:"1"}},[a("v-card-title",[t._v("Featured dApp: metaspan.io - metüåêpay")]),a("v-card-text",[a("p",[t._v("Pay with DOT or KSM")]),a("p",[a("a",{attrs:{href:"https://metaspan.com/#metapay",target:"_blank"}},[t._v("metüåêpay")]),t._v(" "),a("v-icon",{staticClass:"mdi",attrs:{small:""}},[t._v("mdi-open-in-new")])],1)])],1),a("v-card",{staticClass:"my-card",attrs:{elevation:"1"}},[a("v-card-title",[t._v("Featured: metaspan.io - graphql endpoint for Kusama and Polkadot")]),a("v-card-text",[a("p",[t._v("Blending data from API and on-chain (realtime)")]),a("p",[a("a",{attrs:{href:"https://gql.metaspan.io/",target:"_blank"}},[t._v("try it here")]),t._v(" "),a("v-icon",{staticClass:"mdi",attrs:{small:""}},[t._v("mdi-open-in-new")])],1)])],1),a("v-card",{staticClass:"my-card",attrs:{elevation:"2"}},[a("v-card-title",[t._v("API Endpoints")]),a("v-card-text",[a("p",[t._v("We provide the following endpoints (data is a cache of upstream, refreshed each 30 mins):")]),a("table",{attrs:{width:"70%"}},[a("thead",[a("th",[t._v("API")]),a("th",[t._v("Upstream")])]),a("tbody",[a("tr",[a("td",[a("a",{attrs:{href:"https://gql.metaspan.io",target:"_blank"}},[t._v("https://gql.metaspan.io")]),t._v(" "),a("v-icon",{staticClass:"mdi",attrs:{small:""}},[t._v("mdi-open-in-new")])],1),a("td",[t._v("combination of metaspan api and on-chain")])]),a("tr",[a("td",[t._v("https://api.metaspan.io/api/{chain}/candidate")]),a("td",[t._v("https://{chain}.w3f.network/candidates")])]),a("tr",[a("td",[t._v("https://api.metaspan.io/api/{chain}/candidate/{stash}")]),a("td",[t._v("https://{chain}.w3f.network/candidate/{stash}")])]),a("tr",[a("td",[t._v("https://api.metaspan.io/api/{chain}/score")]),a("td",[t._v("https://{chain}.w3f.network/score")])]),a("tr",[a("td",[t._v("https://api.metaspan.io/api/{chain}/score/{stash}")]),a("td",[t._v("https://{chain}.w3f.network/score/{stash}")])]),a("tr",[a("td",[t._v("https://api.metaspan.io/api/{chain}/validator")]),a("td",[t._v("https://{chain}.w3f.network/validator")])]),a("tr",[a("td",[t._v("https://api.metaspan.io/api/{chain}/validator/{stash}")]),a("td",[t._v("https://{chain}.w3f.network/validator/{stash}")])]),a("tr",[a("td",[t._v("https://api.metaspan.io/api/{chain}/nominator")]),a("td",[t._v("https://{chain}.w3f.network/nominator")])]),a("tr",[a("td",[t._v("https://api.metaspan.io/api/{chain}/nominator/{accountId}")]),a("td",[t._v("https://{chain}.w3f.network/nominator/{accountId}")])]),a("tr",[a("td",[t._v("https://api.metaspan.io/api/{chain}/locationStats")]),a("td",[t._v("https://{chain}.w3f.network/locationStats")])]),a("tr",[a("td",[t._v("https://api.metaspan.io/api/{chain}/locationStats/{locationId}")]),a("td",[t._v("https://{chain}.w3f.network/locationStats/{locationId}")])])])])])],1)],1)},Q=[],X=a(6164),tt=function(t,e,a,i){var s,n=arguments.length,o=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,a):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,a,i);else for(var r=t.length-1;r>=0;r--)(s=t[r])&&(o=(n<3?s(o):n>3?s(e,a,o):s(e,a))||o);return n>3&&o&&Object.defineProperty(e,a,o),o};let et=class extends X.w3{};et=tt([(0,X.wA)({components:{}})],et);var at=et,it=at,st=(0,m.Z)(it,W,Q,!1,null,"3456b11a",null),nt=st.exports,ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-fade-transition",{attrs:{mode:"out-in"}},[a("router-view",[t._v(" This is the "+t._s(t.chainId)+" Home page ")])],1)],1)},rt=[],ct=i["default"].extend({name:"ChainHome",props:{chainId:{type:String,required:!0}},computed:{},watch:{async chainId(t){console.debug("ChainHome.vue: watch.chainId()",t),console.debug("ChainHome.vue: watch.chainId(): isReady!"),await this.setChainId(t)}},methods:{async setChainId(t){console.debug("ChainHome.vue: setChain()",t),await this.$substrate.connect(t),await this.$substrate[t].isReady,await this.$store.dispatch("setChain",t),console.debug("ChainHome.vue: reading chainId info()...");const e=await this.$substrate[this.chainId].registry.getChainProperties();console.log("chainInfo.tokenDecimals",e.tokenDecimals.toJSON()[0]),await this.$store.dispatch("substrate/setChainInfo",{chainId:t,chainInfo:e})}},async created(){console.debug("ChainHome.vue: created()",this.chainId,this.$store.state.chainId),this.$store.state.candidate.chainId&&this.chainId===this.$store.state.chainId||await this.setChainId(this.chainId)},async mounted(){console.debug("ChainHome.vue: mounted()")}}),lt=ct,dt=(0,m.Z)(lt,ot,rt,!1,null,null,null),ht=dt.exports,ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{loading:t.loading,fluid:""}},[a("v-toolbar",{attrs:{flat:"",dense:""}},[a("v-toolbar-title",[t._v("Candidates")]),a("v-spacer"),a("v-btn",{staticClass:"text-none",attrs:{text:""}},[a("span",{staticClass:"d-none d-sm-inline"},[t._v("Updated: ")]),t._v(t._s(t.timeAgo(t.updatedAt))+" ")]),a("v-btn",{attrs:{loading:t.loading,icon:""},on:{click:function(e){return t.reload()}}},[a("v-icon",[t._v("mdi-reload")])],1),a("v-btn",{staticClass:"d-block d-sm-none",attrs:{color:t.filterActive?"primary":"",icon:""},on:{click:function(e){t.showFilterDialog=!0}}},[a("v-icon",[t._v("mdi-filter")])],1),a("v-toolbar-items")],1),a("v-toolbar",{staticClass:"d-none d-sm-block",attrs:{dense:"",flat:"",elevation:"0",loading:t.debouncing}},[a("v-switch",{attrs:{label:"Fav."},model:{value:t.xfilter.favourite,callback:function(e){t.$set(t.xfilter,"favourite",e)},expression:"xfilter.favourite"}}),a("v-text-field",{staticClass:"mx-4",attrs:{label:"Search",loading:t.searching},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-text-field",{staticClass:"mx-4",attrs:{label:"Rank"},model:{value:t.xfilter.rank,callback:function(e){t.$set(t.xfilter,"rank",e)},expression:"xfilter.rank"}}),a("v-text-field",{staticClass:"mx-4",attrs:{label:"Score"},model:{value:t.xfilter.score,callback:function(e){t.$set(t.xfilter,"score",e)},expression:"xfilter.score"}}),a("v-switch",{attrs:{label:"Valid"},model:{value:t.xfilter.valid,callback:function(e){t.$set(t.xfilter,"valid",e)},expression:"xfilter.valid"}}),a("v-switch",{attrs:{label:"Active"},model:{value:t.xfilter.active,callback:function(e){t.$set(t.xfilter,"active",e)},expression:"xfilter.active"}})],1),a("v-dialog",{attrs:{width:"400"},model:{value:t.showFilterDialog,callback:function(e){t.showFilterDialog=e},expression:"showFilterDialog"}},[a("v-toolbar",{attrs:{dense:"",dark:!t.dark}},[a("v-tabs",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab",[t._v("Filter")]),a("v-tab",[t._v("Sort")])],1),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(e){t.showFilterDialog=!1}}},[a("v-icon",[t._v("mdi-close")])],1)],1),a("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab-item",{key:"0"},[a("v-card",{attrs:{loading:t.debouncing}},[a("v-card-title",[t._v("Filter")]),a("v-card-text",[a("v-switch",{attrs:{label:"Fav."},model:{value:t.xfilter.favourite,callback:function(e){t.$set(t.xfilter,"favourite",e)},expression:"xfilter.favourite"}}),a("v-text-field",{staticClass:"mx-4",attrs:{label:"Search"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-text-field",{staticClass:"mx-4",attrs:{type:"number",label:"Rank"},model:{value:t.xfilter.rank,callback:function(e){t.$set(t.xfilter,"rank",e)},expression:"xfilter.rank"}}),a("v-text-field",{staticClass:"mx-4",attrs:{type:"number",label:"Score"},model:{value:t.xfilter.score,callback:function(e){t.$set(t.xfilter,"score",e)},expression:"xfilter.score"}}),a("v-switch",{attrs:{label:"Valid"},model:{value:t.xfilter.valid,callback:function(e){t.$set(t.xfilter,"valid",e)},expression:"xfilter.valid"}}),a("v-switch",{attrs:{label:"Active"},model:{value:t.xfilter.active,callback:function(e){t.$set(t.xfilter,"active",e)},expression:"xfilter.active"}})],1)],1)],1),a("v-tab-item",{key:"1"},[a("v-card",[a("v-card-title",[t._v("Sort")]),a("v-card-text",[a("v-select",{attrs:{items:t.sortItems,"item-text":"text","item-value":"value",label:"Sort"},model:{value:t.xfilter.sort,callback:function(e){t.$set(t.xfilter,"sort",e)},expression:"xfilter.sort"}}),a("v-switch",{attrs:{value:"asc",label:"Ascending"},model:{value:t.xfilter.sortAsc,callback:function(e){t.$set(t.xfilter,"sortAsc",e)},expression:"xfilter.sortAsc"}})],1)],1)],1)],1)],1),t.windowSize.x>=600?a("CandidatesTable",{attrs:{filter:t.xfilter,search:t.search},on:{"click-item":t.gotoCandidate}}):t._e(),t.windowSize.x<600?a("CandidatesList",{attrs:{filter:t.xfilter,search:t.search},on:{"click-item":t.gotoCandidate}}):t._e(),a("Loading",{attrs:{loading:t.loading}})],1)},mt=[],vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-table",{attrs:{dense:"",loading:t.loading,headers:t.headers,items:t.items,page:t.options.page,"items-per-page":t.options.itemsPerPage,"sort-by":t.options.sortBy,"sort-desc":t.options.sortDesc,"item-key":"id","loading-text":"Loading candidates...","footer-props":{"items-per-page-options":[10,20,30,40,50]}},on:{pagination:t.handlePaginate,"update:options":t.handleOptions,"update:page":t.handlePage,"update:items-per-page":t.handleItemsPerPage},scopedSlots:t._u([{key:"item.favourite",fn:function(e){var i=e.item;return[a("v-btn",{attrs:{small:"",icon:""},on:{click:function(e){return t.toggleFav(i)}}},[a("v-icon",{attrs:{small:"",color:i.favourite?"orange":"grey"}},[t._v("mdi-star")])],1)]}},{key:"item.name",fn:function(e){var i=e.item;return[a("div",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.clickItem(i)}}},[a("span",{staticClass:"identicon"},[a("Identicon",{attrs:{value:i.stash,size:16,theme:"polkadot"}})],1),t._v(" "+t._s(i.name)+" ")])]}},{key:"item.identity_name",fn:function(e){var i=e.item;return[a("div",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.clickItem(i)}}},[t._v(" "+t._s(i.identity_name)+" ")])]}},{key:"item.discoveredAt",fn:function(e){var a=e.item;return[t._v(" "+t._s(t.timeAgo(a.discoveredAt))+" ")]}},{key:"item.valid",fn:function(e){var i=e.item;return[a("div",{attrs:{align:"center"}},[a("v-icon",{attrs:{small:"",color:i.valid?"green":"red"}},[t._v("mdi-"+t._s(i.valid?"check-circle":"close-circle"))])],1)]}},{key:"item.active",fn:function(e){var i=e.item;return[a("v-icon",{attrs:{small:"",color:i.active?"green":"grey"}},[t._v("mdi-"+t._s(i.active?"check-circle":"minus-circle"))])]}},{key:"item.score",fn:function(e){var a=e.item;return[t._v(" "+t._s(a.score?a.score.toFixed(2):0)+" ")]}}],null,!0)})},pt=[],gt=(a(6699),a(5759)),ft=i["default"].extend({props:{search:{type:String},filter:{type:Object}},components:{Identicon:gt.ZP},computed:{...(0,o.rn)(["chainId"]),...(0,o.Se)("candidate",["filtering","updatedAt","filteredList","favourites","loading"]),headers(){return[{text:"Favourite",align:"center",sortable:!0,value:"favourite",width:"5%",filter:t=>!this.xfilter.favourite||t},{text:"Name",align:null,sortable:!0,value:"name",width:"15%"},{text:"Identity",align:null,sortable:!0,value:"identity_name",width:"15%"},{text:"Discovered",align:null,sortable:!0,value:"discoveredAt",width:"10%"},{text:"Valid",align:"center",sortable:!0,value:"valid",width:"5%",filter:t=>!this.xfilter.valid||!0===t},{text:"Active",align:"center",sortable:!0,value:"active",width:"5%",filter:t=>!this.xfilter.active||!0===t},{text:"Rank",align:"center",sortable:!0,value:"rank",width:"5%",filter:t=>!this.xfilter.rank||t>=parseInt(this.xfilter.rank)},{text:"Score",align:"center",sortable:!0,value:"score",width:"5%",filter:t=>!this.xfilter.score||t>=this.xfilter.score}]},items(){const t=this.filteredList;return t.map(((t,e)=>({id:`${t.stash}-${e}`,favourite:this.favourites.includes(t.stash),stash:t.stash,name:t.name,identity_name:t.identity.name,discoveredAt:t.discoveredAt,valid:t.valid,active:t.active,rank:t.rank,score:t.score?.total})))}},watch:{chainId(t){this.fetchOptions(t)}},data(){return{options:{page:1,itemsPerPage:10,sortBy:[],sortDesc:[]},xfilter:{favourite:!1,rank:"",score:0,valid:!1,active:!1}}},methods:{isValid(t){const e=t.find((t=>!1===t.valid));return!e},timeAgo(t){return b()(t).fromNow()},clickItem(t){this.$emit("click-item",t)},toggleFav(t){this.$store.dispatch("candidate/toggleFav",{stash:t.stash})},handlePaginate(t){this.$store.dispatch("candidate/paginate",{pagination:t})},handlePage(t){t||console.debug(t)},handleItemsPerPage(t){console.debug(t)},fetchOptions(t){this.options=this.$store.state.candidate[t]?.options||{},console.debug("fetchOptions",this.chainId,t,this.options)},handleOptions(t){console.debug("CandidatesTable.vue: ",t),this.$store.dispatch("candidate/handleOptions",{options:t})}},created(){console.debug("CandidatesTable.vue: created()",this.chainId,this.$store.state.candidate[this.chainId]?.options),this.fetchOptions(this.chainId)}}),_t=ft,bt=(0,m.Z)(_t,vt,pt,!1,null,"074ebd55",null),It=bt.exports,wt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list",{attrs:{loading:t.filtering}},t._l(t.filteredList,(function(e){return a("v-list-item",{key:e.stash,attrs:{"two-line":""}},[a("v-list-item-content",{staticStyle:{cursor:"pointer"},attrs:{"three-line":""},on:{click:function(a){return t.clickItem(e)}}},[a("v-list-item-title",[a("span",{staticClass:"identicon"},[a("Identicon",{attrs:{value:e.stash,size:16,theme:"polkadot"}})],1),t._v(" "+t._s(e.name)+" "+t._s(e.identity?"/ "+e.identity.name:"")+" ")]),a("v-list-item-subtitle",[t._v("Score: "+t._s(t.getScore(e))+", Rank: "+t._s(e.rank))]),a("div",[a("v-chip",{attrs:{"x-small":"",color:t.isValid(e.validity)?"green":"red"}},[t._v("Valid¬†"),a("v-icon",{staticClass:"d-none d-sm-inline",attrs:{"x-small":"",dark:""}},[t._v("mdi-"+t._s(t.isValid(e.validity)?"check-circle":"close-circle"))])],1),t._v(" ¬†"),a("v-chip",{attrs:{"x-small":"",color:e.active?"green":"grey"}},[t._v("Active¬†"),a("v-icon",{staticClass:"d-none d-sm-inline",attrs:{"x-small":"",dark:""}},[t._v("mdi-"+t._s(e.active?"check-circle":"minus-circle"))])],1)],1)],1),a("v-list-item-action",{on:{click:function(a){return t.toggleFav(e)}}},[a("v-btn",{attrs:{icon:""}},[a("v-icon",{attrs:{color:t.isFavourite(e.stash)?"orange":"grey"}},[t._v("mdi-star")])],1)],1),a("v-list-item-action",{staticClass:"d-none d-sm-block",on:{click:function(a){return t.clickItem(e)}}},[a("v-icon",[t._v("mdi-chevron-right")])],1)],1)})),1)},yt=[],kt=i["default"].extend({name:"CandidatesList",components:{Identicon:gt.ZP},props:{},computed:{...(0,o.rn)(["chain"]),...(0,o.Se)("candidate",["filteredList","filter","loading","filtering","favourites"])},data(){return{}},methods:{clickItem(t){this.$emit("click-item",t)},isFavourite(t){return this.favourites.includes(t)},toggleFav(t){this.$store.dispatch("candidate/toggleFav",{chain:this.chain,stash:t.stash})},timeAgo(t){return b()(t).fromNow()},getScore(t){return t.score&&t.score.total?t.score.total.toFixed(2):0},isValid(t=[]){const e=t.find((t=>!1===t.valid));return!e}}}),St=kt,xt=(0,m.Z)(St,wt,yt,!1,null,"2101654e",null),Ct=xt.exports,Tt=a(2196),Et=i["default"].extend({name:"Candidates",components:{CandidatesTable:It,CandidatesList:Ct,Loading:z},computed:{...(0,o.rn)(["chainId"]),...(0,o.Se)("candidate",["apiConnected","loading","updatedAt","favourites"]),...(0,o.rn)(["dark"])},data(){return{tab:0,windowSize:{x:0,y:0},debouncing:!1,filterActive:!1,showFilterDialog:!1,dateTimeFormat:"YYYY/MM/DD hh:mm",search:"",searching:!1,sortItems:[{text:"Name",value:"name"},{text:"Rank",value:"rank"},{text:"Score",value:"score"}],xfilter:{rank:0,score:0,valid:!1,active:!1,favourite:!1,sort:"rank",sortAsc:!1}}},watch:{chainId(t){this.$router.push(`/${t}/candidate`),this.fetchFilter()},search(t){this.debouncing=!0,this.searching=!0,this.debouncedSearch(t)},xfilter:{deep:!0,handler(t){this.debouncing=!0,this.debouncedFilter(t)}}},methods:{debouncedSearch(t){console.debug(t)},debouncedFilter(t){console.debug(t)},fetchFilter(){this.$store.state.candidate[this.chainId]&&(this.xfilter=this.$store.state.candidate[this.chainId].filter,this.search=this.$store.state.candidate[this.chainId].search)},checkFilterActive(){this.filterActive=this.xfilter.active||this.xfilter.favourite||this.xfilter.rank>0||this.xfilter.score>0||this.xfilter.valid||""!==this.search},timeAgo(t){return b()(t).fromNow()},formatDate(t){return b()(t).format(this.dateTimeFormat)},reload(){this.$store.dispatch("candidate/getList")},gotoCandidate(t){console.debug("gotoCandidate",this.chainId,t),this.$store.dispatch("candidate/setCandidate",{chainId:this.chainId,stash:t.stash}),this.$router.push(`/${this.chainId}/candidate/${t.stash}`)}},async created(){console.debug("Candidates.vue: created()",this.chainId),this.windowSize={x:window.innerWidth,y:window.innerHeight},this.debouncedSearch=(0,Tt.debounce)((t=>{this.checkFilterActive(),this.$store.dispatch("candidate/setSearch",{chainId:this.chainId,search:t}),this.debouncing=!1,this.searching=!1}),1e3),this.debouncedFilter=(0,Tt.debounce)((t=>{this.checkFilterActive(),this.$store.dispatch("candidate/handleFilter",{chainId:this.chainId,filter:t}),this.debouncing=!1,this.searching=!1}),1e3),this.chainId&&void 0!==this.chainId||(console.debug("setting chainId to",this.$route.params.chainId),await this.$store.dispatch("setChain",{chainId:this.$route.params.chainId}))},async mounted(){console.debug("Candidates.vue: mounted()",this.chainId,this.$route.params),this.fetchFilter()},async beforeDestroy(){console.debug("Candidates.vue: beforeDestroy()")}}),At=Et,$t=(0,m.Z)(At,ut,mt,!1,null,"5bb49416",null),jt=$t.exports,Dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-toolbar",{attrs:{flat:""}},[a("v-btn",{attrs:{small:"",icon:""},on:{click:function(e){return t.$router.go(-1)}}},[a("v-icon",[t._v("mdi-arrow-left")])],1),a("v-toolbar-title",[a("span",{staticClass:"text-h7 text-sm-h6 text-md-h5"},[a("span",{staticClass:"identicon"},[a("Identicon",{attrs:{value:t.candidate.stash,size:24,theme:"polkadot"}})],1),t._v(" "+t._s(t.candidate.name)+" "),a("span",{staticClass:"d-none d-md-inline"},[t._v("| "+t._s(t.candidate.identity?t.candidate.identity.name:""))])])]),a("v-spacer"),a("CandidateExternalLinks",{attrs:{candidate:t.candidate}})],1),a("v-row",[a("v-col",[a("CandidateIdentity",{attrs:{chainId:t.chainId,stash:t.candidate.stash}})],1),a("v-col",[a("CandidateBalance",{attrs:{stash:t.candidate.stash}})],1)],1),a("CandidateIcons",{staticClass:"d-block d-md-none"}),a("v-container",{staticClass:"d-none d-md-block"},[a("v-row",{attrs:{justify:"center"}},[a("v-col",{staticClass:"outlined col-4 col-sm-3 col-md-2",attrs:{align:"center"}},[t._v("Rank"),a("br"),t._v(t._s(t.candidate.rank))]),a("v-col",{staticClass:"col-4 col-sm-3 col-md-2",attrs:{align:"center"}},[t._v("Score"),a("br"),t._v(t._s(t.candidate.score&&t.candidate.score.total?t.candidate.score.total.toFixed(2):0))]),a("v-col",{staticClass:"col-4 col-sm-3 col-md-2",attrs:{align:"center"}},[t._v("Commission"),a("br"),t._v(t._s(t.candidate.commission?t.candidate.commission.toFixed(2):"0.00")+"%")]),a("v-col",{staticClass:"col-4 col-sm-3 col-md-2",attrs:{align:"center"}},[t._v("Valid"),a("br"),a("v-icon",{attrs:{color:t.candidate.valid?"green":"red"}},[t._v("mdi-"+t._s(t.candidate.valid?"check-circle":"close-circle"))])],1),a("v-col",{staticClass:"col-4 col-sm-3 col-md-2",attrs:{align:"center"}},[t._v("Active"),a("br"),a("v-icon",{attrs:{color:t.candidate.active?"green":"grey"}},[t._v("mdi-"+t._s(t.candidate.active?"check-circle":"minus-circle"))])],1)],1),a("v-row",{attrs:{justify:"center"}},[a("v-col",{staticClass:"outlined col-4 col-sm-3 col-md-2",attrs:{align:"center"}},[t._v("Discovered"),a("br"),t._v(t._s(t.timeAgo(t.candidate.discoveredAt)))]),a("v-col",{staticClass:"outlined col-4 col-sm-3 col-md-2",attrs:{align:"center"}},[t._v("Nominated"),a("br"),t._v(t._s(t.timeAgo(t.candidate.nominatedAt)))]),a("v-col",{staticClass:"outlined col-4 col-sm-3 col-md-2",attrs:{align:"center"}},[t._v("Online"),a("br"),t._v(t._s(t.timeAgo(t.candidate.onlineSince)))]),a("v-col",{staticClass:"outlined col-4 col-sm-3 col-md-2",attrs:{align:"center"}},[t._v("Node version"),a("br"),t._v("TBC")])],1),a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{align:"center"}},[t._v("Stash"),a("br"),t._v(t._s(t.formatStash(t.candidate.stash)))]),a("v-col",{attrs:{align:"center"}},[t._v("Controller"),a("br"),t._v("TBC")]),a("v-col",{attrs:{align:"center"}},[t._v("Queued key"),a("br"),t._v("TBC")]),a("v-col",{attrs:{align:"center"}},[t._v("Next Key"),a("br"),t._v("TBC")])],1),a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{align:"center"}},[t._v("Node location"),a("br"),t._v(t._s(t.candidate.location))]),a("v-col",{attrs:{align:"center"}},[t._v("Reward Destination"),a("br"),t._v("TBC")]),a("v-col",{attrs:{align:"center"}},[t._v("Faults"),a("br"),t._v(t._s(t.candidate.faults))]),a("v-col",{attrs:{align:"center"}},[t._v("Unclaimed Eras"),a("br"),t._v(t._s(t.candidate.unclaimedEras?t.candidate.unclaimedEras.length:0))])],1),a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{align:"center"}},[t._v("Democracy Vote Count"),a("br"),t._v(t._s(t.candidate.democracyVoteCount))]),a("v-col",{attrs:{align:"center"}},[t._v("Democracy Votes"),a("br"),t._v(t._s(t.candidate.democracyVotes))]),a("v-col",{attrs:{align:"center"}},[t._v("Council Stake"),a("br"),t._v(t._s(t.candidate.councilStake))]),a("v-col",{attrs:{align:"center"}},[t._v("Council Votes"),a("br"),t._v(t._s(t.candidate.unclaimedEras?t.candidate.unclaimedEras.length:0))])],1)],1),a("v-list"),a("CandidateValidity",{attrs:{candidate:t.candidate}}),a("CandidateNominators",{attrs:{stash:t.candidate.stash}}),a("CandidateScore",{attrs:{candidate:t.candidate}}),a("CandidateScoreList"),a("Loading",{attrs:{loading:t.loading}})],1)},Lt=[],Nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-card-title",[a("span",{staticClass:"text-h6"},[t._v("Validity")])]),a("v-row",{attrs:{justify:"center"}},t._l(t.candidate.validity,(function(e){return a("v-col",{key:e._id,staticClass:"cicon",attrs:{align:"center"}},[t._v(" "+t._s(t.getText(e.type))),a("br"),a("v-icon",{attrs:{color:e.valid?"green":"red"}},[t._v("mdi-"+t._s(e.valid?"check-circle":"close-circle"))])],1)})),1)],1)},Ot=[],Pt=i["default"].extend({computed:{},props:{candidate:{type:void 0}},data(){return{dateTimeFormat:"YYYY/MM/DD hh:mm",text:{ACCUMULATED_OFFLINE_TIME:"On/Offline",BLOCKED:"Blocked",CLIENT_UPGRADE:"Upgrade",COMMISION:"Commission",CONNECTION_TIME:"Connection",IDENTITY:"Identity",KUSAMA_RANK:"Kusama Rank",ONLINE:"Online",REWARD_DESTINATION:"Reward Destination",SELF_STAKE:"Self stake",UNCLAIMED_REWARDS:"Unclaimed",VALIDATE_INTENTION:"Intention"}}},methods:{formatDate(t,e){const a=e||this.dateTimeFormat;return b()(t).format(a)},dateSpan(t=5,e="weeks",a="YY/MM/DD"){const i=b()().add(-t,e).format(a),s=b()().add(-1,"days").format(a);return`${i} - ${s}`},getText(t){const e=this.text;return e[t]||"**Undefined"}}}),Ft=Pt,Rt=(0,m.Z)(Ft,Nt,Ot,!1,null,null,null),Vt=Rt.exports,Mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-none d-sm-block"},[a("v-card",{attrs:{tile:"",elevation:"1",width:"100%"}},[a("v-card-title",[a("span",{staticClass:"text-h5"},[t._v("Score: "+t._s(t.candidate.score.total.toFixed(3)))])])],1),a("v-simple-table",{attrs:{dense:""},scopedSlots:t._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",[t._v("Component")]),a("th",[t._v("Scorable Range")]),a("th",[t._v("This Validator")]),a("th",{staticClass:"text-right"},[t._v("Score")])])]),a("tbody",[a("tr",[a("th",[t._v("28-Era Inclusion")]),a("td",[t._v("-")]),a("td",[t._v("-")]),a("td",{staticClass:"text-right"},[t._v(t._s(t.getScore(t.candidate.score.spanInclusion))+" "),a("small",[t._v("/"+t._s(t.denoms["spanInclusion"]))])])]),a("tr",[a("th",[t._v("84-Era Inclusion")]),a("td",[t._v("-")]),a("td",[t._v("-")]),a("td",{staticClass:"text-right"},[t._v(t._s(t.getScore(t.candidate.score.inclusion))+" "),a("small",[t._v("/"+t._s(t.denoms["inclusion"]))])])]),a("tr",[a("th",[t._v("First Discovered")]),a("td",[t._v("-")]),a("td",[t._v(t._s(t.formatDate(t.candidate.discoveredAt,t.dateFormat)))]),a("td",{staticClass:"text-right"},[t._v(t._s(t.getScore(t.candidate.score.discovered))+" "),a("small",[t._v("/"+t._s(t.denoms["discovered"]))])])]),a("tr",[a("th",[t._v("Last Nominated")]),a("td",[t._v(t._s(t.dateSpan("37","days",t.dateFormat)))]),a("td",[t._v(t._s(t.formatDate(t.candidate.discoveredAt,t.dateFormat)))]),a("td",{staticClass:"text-right"},[t._v(t._s(t.getScore(t.candidate.score.nominated))+" "),a("small",[t._v("/"+t._s(t.denoms["nominated"]))])])]),a("tr",[a("th",[t._v("Rank")]),a("td",[t._v(t._s(t.ranges.rank.min)+" - "+t._s(t.ranges.rank.max))]),a("td",[t._v(t._s(t.candidate.rank))]),a("td",{staticClass:"text-right"},[t._v(t._s(t.getScore(t.candidate.score.rank))+" "),a("small",[t._v("/"+t._s(t.denoms["rank"]))])])]),a("tr",[a("th",[t._v("Self Bonded")]),a("td",[t._v("-")]),a("td",[t._v("-")]),a("td",{staticClass:"text-right"},[t._v(t._s(t.getScore(t.candidate.score.bonded))+" "),a("small",[t._v("/"+t._s(t.denoms["bonded"]))])])]),a("tr",[a("th",[t._v("Faults")]),a("td",[t._v("0 - 7")]),a("td",[t._v("-")]),a("td",{staticClass:"text-right"},[t._v(t._s(t.getScore(t.candidate.score.faults))+" "),a("small",[t._v("/"+t._s(t.denoms["faults"]))])])]),a("tr",[a("th",[t._v("Offline")]),a("td",[t._v("0 - 0")]),a("td",[t._v("-")]),a("td",{staticClass:"text-right"},[t._v(t._s(t.getScore(t.candidate.score.offline))+" "),a("small",[t._v("/"+t._s(t.denoms["offline"]))])])]),a("tr",[a("th",[t._v("Node Location")]),a("td",[t._v("N/A")]),a("td",[t._v(t._s(t.candidate.location))]),a("td",{staticClass:"text-right"},[t._v(t._s(t.getScore(t.candidate.score.location))+" "),a("small",[t._v("/"+t._s(t.denoms["location"]))])])]),a("tr",[a("th",[t._v("Council Stake")]),a("td",[t._v("N/A")]),a("td",[t._v(t._s(t.candidate.councilStake))]),a("td",{staticClass:"text-right"},[t._v(t._s(t.getScore(t.candidate.score.councilStake))+" "),a("small",[t._v("/"+t._s(t.denoms["councilStake"]))])])]),a("tr",[a("th",[t._v("Democracy")]),a("td",[t._v("N/A")]),a("td",[t._v(t._s(t.candidate.democracyVoteCount)+" Votes")]),a("td",{staticClass:"text-right"},[t._v(t._s(t.getScore(t.candidate.score.democracy)))])]),a("tr",[a("th",[t._v("Unclaimed Eras")]),a("td",[t._v("N/A")]),a("td",[t._v(t._s(t.candidate.unclaimedEras?t.candidate.unclaimedEras.length:0))]),a("td",{staticClass:"text-right"},[t._v(t._s(t.getScore(t.candidate.score.unclaimed)))])]),a("tr",[a("th",[t._v("Aggregate")]),a("td"),a("td"),a("td",{staticClass:"text-right"},[t._v(t._s(t.getScore(t.candidate.score.aggregate)))])]),a("tr",[a("th",[t._v("Randomness")]),a("td"),a("td"),a("td",{staticClass:"text-right"},[t._v(t._s(t.getScore(t.candidate.score.randomness))+"%")])]),a("tr",[a("th",[t._v("Total")]),a("td"),a("td",[a("v-progress-linear",{attrs:{value:t.candidate.score.total/t.ranges.score.max*100}})],1),a("td",{staticClass:"text-right"},[t._v(t._s(t.getScore(t.candidate.score.total)))])])])]},proxy:!0}])})],1)},Zt=[],Bt=i["default"].extend({name:"CandidateScore",props:["candidate"],computed:{...(0,o.Se)("candidate",["ranges"])},data(){return{dateFormat:"MMM DD",dateTimeFormat:"YYYY/MM/DD hh:mm",denoms:{updated:1652607338086,spanInclusion:100,inclusion:100,discovered:5,nominated:30,rank:5,bonded:50,faults:5,offline:2,location:40,councilStake:50}}},methods:{getScore(t){return t?t.toFixed(2):0},formatDate(t,e){const a=e||this.dateTimeFormat;return b()(t).format(a)},dateSpan(t="5",e="weeks",a="YY/MM/DD"){const i=b()().add(-t,e).format(a),s=b()().add(-1,"days").format(a);return`${i} - ${s}`}},created(){},mounted(){}}),Gt=Bt,qt=(0,m.Z)(Gt,Mt,Zt,!1,null,null,null),zt=qt.exports,Ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{elevation:"1"}},[a("v-card-title",[t._v("Details")]),a("v-card-text",[a("v-row",{attrs:{justify:"center"}},[a("v-col",{staticClass:"cicon",attrs:{align:"center"}},[t._v("Valid"),a("br"),a("v-icon",{attrs:{color:t.candidate.valid?"green":"red"}},[t._v("mdi-"+t._s(t.candidate.valid?"check-circle":"close-circle"))])],1),a("v-col",{staticClass:"cicon",attrs:{align:"center"}},[t._v("Active"),a("br"),a("v-icon",{attrs:{color:t.candidate.active?"green":"grey"}},[t._v("mdi-"+t._s(t.candidate.active?"check-circle":"minus-circle"))])],1),a("v-col",{staticClass:"cicon",attrs:{align:"center"}},[t._v("Rank"),a("br"),t._v(t._s(t.candidate.rank))]),a("v-col",{staticClass:"cicon",attrs:{align:"center"}},[t._v("Score"),a("br"),t._v(t._s(t.candidate.score?t.candidate.score.total.toFixed(2):0))]),a("v-col",{staticClass:"cicon",attrs:{align:"center"}},[t._v("Commission"),a("br"),t._v(t._s(t.candidate.commission.toFixed(2))+"%")]),a("v-col",{staticClass:"cicon",attrs:{align:"center"}},[t._v("Discovered"),a("br"),t._v(t._s(t.timeAgo(t.candidate.discoveredAt)))]),a("v-col",{staticClass:"cicon",attrs:{align:"center"}},[t._v("Nominated"),a("br"),t._v(t._s(t.timeAgo(t.candidate.nominatedAt)))]),a("v-col",{staticClass:"cicon",attrs:{align:"center"}},[t._v("Online"),a("br"),t._v(t._s(t.timeAgo(t.candidate.onlineSince)))]),a("v-col",{staticClass:"cicon",attrs:{align:"center"}},[t._v("Node version"),a("br"),t._v("TBC")]),a("v-col",{staticClass:"cicon",attrs:{align:"center"}},[t._v("Stash"),a("br"),t._v(t._s(t.formatStash(t.candidate.stash)))]),a("v-col",{staticClass:"cicon",attrs:{align:"center"}},[t._v("Controller"),a("br"),t._v("TBC")]),a("v-col",{staticClass:"cicon",attrs:{align:"center"}},[t._v("Queued key"),a("br"),t._v("TBC")]),a("v-col",{staticClass:"cicon",attrs:{align:"center"}},[t._v("Next Key"),a("br"),t._v("TBC")]),a("v-col",{staticClass:"cicon",attrs:{align:"center"}},[t._v("Location"),a("br"),t._v(t._s(t.candidate.location))]),a("v-col",{staticClass:"cicon",attrs:{align:"center"}},[t._v("Reward Dest."),a("br"),t._v("TBC")]),a("v-col",{staticClass:"cicon",attrs:{align:"center"}},[t._v("Faults"),a("br"),t._v(t._s(t.candidate.faults))]),a("v-col",{staticClass:"cicon",attrs:{align:"center"}},[t._v("Unclaimed Eras"),a("br"),t._v(t._s(t.candidate.unclaimedEras?t.candidate.unclaimedEras.length:0))]),a("v-col",{staticClass:"cicon",attrs:{align:"center"}},[t._v("Democracy Vote Count"),a("br"),t._v(t._s(t.candidate.democracyVoteCount))]),a("v-col",{staticClass:"cicon",attrs:{align:"center"}},[t._v("Council Stake"),a("br"),t._v(t._s(t.candidate.councilStake))]),a("v-col",{staticClass:"cicon",attrs:{align:"center"}},[t._v("Council Votes"),a("br"),t._v(t._s(t.candidate.councilVotes?t.candidate.councilVotes.length:0))]),a("v-col",{staticClass:"cicon",attrs:{align:"center"}},[t._v("Democracy Votes"),a("br"),t._v(t._s(t.candidate.democracyVotes))])],1)],1)],1)},Yt=[],Ut=i["default"].extend({name:"Candidate",computed:{...(0,o.rn)(["chain"]),...(0,o.Se)("candidate",["candidate","ranges"]),...(0,o.rn)("polkadot",{cache:"cache"}),balance(){return this.cache[this.candidate.stash]||{}}},data(){return{dateTimeFormat:"YYYY/MM/DD hh:mm",activeEra:{},header:{}}},methods:{timeAgo(t){return b()(t).fromNow()},isValid(t=[]){const e=t.find((t=>!1===t.valid));return!e},formatDate(t){return b()(t).format(this.dateTimeFormat)},formatStash(t,e=5){return t.length<=2*e+3?t:t.substr(0,e)+".."+t.substr(t.length-e)}}}),Kt=Ut,Jt=(0,m.Z)(Kt,Ht,Yt,!1,null,null,null),Wt=Jt.exports,Qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("v-btn",t._g(t._b({attrs:{icon:"",text:""}},"v-btn",s,!1),i),[a("v-icon",[t._v("mdi-menu")])],1),t._v(" "),a("span",{staticClass:"d-none d-sm-inline"},[t._v("Links")])]}}])},[a("v-list",[a("v-list-item",[a("v-list-item-icon",[a("svg",{attrs:{id:"Layer_1","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 990 319.84"}},[a("title",[t._v("KUSAMA_logo copy 6")]),a("path",{staticClass:"cls-1",attrs:{d:"M631.44,140.4v-.59a21.61,21.61,0,0,0-21.57-21.32H595.54a2,2,0,0,1-2.29-2.29v-13c0-.19,0-.39,0-.6a24.82,24.82,0,1,0-49.63,0V116.2a2,2,0,0,1-2.29,2.29H495a2,2,0,0,1-2.29-2.29V101.31a23.55,23.55,0,0,0-47.1,0V116.2c0,1.53-.68,2.29-2,2.29H429a21.62,21.62,0,0,0,0,43.23,8.51,8.51,0,0,1,1.08.05h13.46c1.35,0,2,.76,2,2.29v20a23.56,23.56,0,0,0,47.1.93v-20.9a2,2,0,0,1,2.29-2.29h46.33a2,2,0,0,1,2.29,2.29V174.5q0,19.6-3.31,31.94a48.46,48.46,0,0,1-12,21.39q-8.65,9-22.79,13.87a167.15,167.15,0,0,1-29.24,6.59,22.13,22.13,0,0,0,4.63,43.78c.53,0,1.05,0,1.57-.05q58.08-7.63,83.89-34.15,26.85-27.62,26.85-83.37V164a2,2,0,0,1,2.29-2.29h14.3A21.61,21.61,0,0,0,631.44,140.4Z"}}),a("path",{staticClass:"cls-1",attrs:{d:"M839,94.82a13.92,13.92,0,0,0-10.18-4.33H655.55a22.28,22.28,0,0,0,0,44.55H787a1.49,1.49,0,0,1,1.27.76c.34.51.34.94,0,1.27q-18.84,32.85-62.37,57.54-1.79,1.27-3.31-.77c-2.84-3.84-5.34-7.22-7.53-10.16h0a25.27,25.27,0,0,0-34-6.28l-1,.65A25.24,25.24,0,0,0,673.92,213q24.24,33.34,46,65.05a25.45,25.45,0,0,0,41.69-29c-2.21-3.24-4.76-6.93-7.66-11.13-.85-1.18-.59-2.12.77-2.8q31.31-18.33,51-39a169.23,169.23,0,0,0,32-47.6,68.81,68.81,0,0,0,5.6-28V105A14,14,0,0,0,839,94.82Z"}}),a("path",{staticClass:"cls-1",attrs:{d:"M393.36,104.87a14,14,0,0,0-10.31-4.2H294.6s-7.68.28-7.72-.24A23.2,23.2,0,0,0,241.32,96a.67.67,0,0,1-.08.17,194.56,194.56,0,0,1-36.3,73,23.08,23.08,0,0,0,4.15,30.59l.37.32a23.09,23.09,0,0,0,30.7-1.36A222.9,222.9,0,0,0,274.6,146a3,3,0,0,1,3.06-2h65.17c1.69,0,2.37.68,2,2q-5.61,49.65-31.44,72.56-23.9,21.18-74,29.3h0a22.15,22.15,0,0,0,3.19,44.06,23.06,23.06,0,0,0,3.23-.23,6,6,0,0,1,1-.07Q322.78,281.17,358.61,242q37.68-41.25,38.95-126.78A14,14,0,0,0,393.36,104.87Z"}}),a("path",{staticClass:"cls-1",attrs:{d:"M492.24,21.51a10.75,10.75,0,0,0-5.72-2.8c-2.68-.35-5.39,1.43-7.23,2.62S474,26,472.52,27s-5.12,2-11,5.59-29.17,18.46-29.17,18.46l6.05.06L411.42,65.08h2.69l-3.87,3a8.67,8.67,0,0,0,6.3-.92l0,.83s32.09-12.65,38.32-9.37L451.1,59.7c.33,0,6.44.39,6.44.39a8.61,8.61,0,0,0,3.88,6.24c3.68,2.43,3.74,3.75,3.74,3.75s-1.9.78-1.9,1.77a17.4,17.4,0,0,1,10.38,0s-.2-1-2.76-1.77-5.06-3.49-6.31-5a7,7,0,0,1-1-6.9c.88-2.28,4-3.55,10.31-6.83,7.49-3.87,9.19-6.77,10.24-9s2.63-6.7,3.5-8.8a11.6,11.6,0,0,1,3.6-5,46.77,46.77,0,0,1,6.18-2.76S493.49,22.5,492.24,21.51Z"}})])]),a("v-list-item-title",[a("a",{staticClass:"none",attrs:{href:"https://thousand-validators."+t.chain+".network/#/leaderboard/"+t.candidate.stash,target:"_blank"}},[t._v(" TVP")])])],1),a("v-list-item",[a("v-list-item-icon",[a("img",{attrs:{width:"18px",heithg:"18px",src:"https://polkadot.js.org/apps/static/subscan.11e2654a..svg"}})]),a("v-list-item-title",[a("a",{staticClass:"none",attrs:{href:"https://"+t.chain+".subscan.io/validator/"+t.candidate.stash,target:"_blank"}},[t._v(" subscan")])])],1),a("v-list-item",[a("v-list-item-icon",[a("img",{attrs:{width:"18px",heithg:"18px",src:"https://polkadot.js.org/apps/static/subscan.11e2654a..svg"}})]),a("v-list-item-title",[a("a",{staticClass:"none",attrs:{href:"https://"+t.chain+".subscan.io/account/"+t.candidate.stash+"?tab=reward",target:"_blank"}},[t._v(" subscan Rewards")])])],1),a("v-list-item",[a("v-list-item-icon",{staticClass:"position-relative"},[a("img",{staticClass:"polkastats-logo",attrs:{src:"https://kusama.polkastats.io/img/polkastats_logo_dark@1x.png"}})]),a("v-list-item-title",[a("a",{staticClass:"none",attrs:{href:"https://"+t.chain+".polkastats.io/validator/"+t.candidate.stash,target:"_blank"}},[t._v(" polkastats ")])])],1),a("v-list-item",[a("v-list-item-icon",[a("svg",{staticClass:"w-6 h-6",attrs:{height:"16px",viewBox:"0 0 44.426 44.424","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{fill:"#7c3aed",d:"M28.272 25.817c1.006-.551 1.754-1.306 2.24-2.268.486-.96.73-2.065.73-3.314 0-1.247-.244-2.346-.73-3.296-.486-.949-1.236-1.691-2.25-2.223-1.013-.533-2.314-.799-3.905-.799h-5.839V26.64h5.873c1.58 0 2.873-.274 3.881-.823z"}}),a("path",{attrs:{fill:"#7c3aed",d:"M22.213 0C9.945 0 0 9.945 0 22.213c0 7.366 3.588 13.892 9.109 17.933.264.103.544.171.844.171a2.364 2.364 0 0 0 2.363-2.363l.004-2.257V8.594h13.014c2.702 0 4.972.504 6.809 1.511 1.838 1.008 3.229 2.39 4.173 4.146.944 1.757 1.417 3.752 1.417 5.983 0 2.256-.476 4.259-1.426 6.011-.95 1.75-2.354 3.127-4.207 4.128-1.853 1.001-4.138 1.502-6.851 1.502h-6.606l-.014 9.086a3.59 3.59 0 0 0 2.559 3.437c.34.016.682.026 1.025.026 12.269 0 22.213-9.944 22.213-22.213C44.426 9.945 34.482 0 22.213 0Z"}})])]),a("v-list-item-title",[a("a",{staticClass:"none",attrs:{href:"https://polkachu.com/"+t.chain+"/thousand_validators/"+t.candidate.stash,target:"_blank"}},[t._v(" polkachu ")])])],1)],1)],1)},Xt=[],te={name:"CandidateExternalLinks",props:["candidate"],computed:{...(0,o.rn)(["chain"])}},ee=te,ae=(0,m.Z)(ee,Qt,Xt,!1,null,"362e4349",null),ie=ae.exports,se=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-block d-sm-none"},[a("v-card",{attrs:{tile:"",elevation:"1",width:"100%"}},[a("v-card-title",[a("span",{staticClass:"text-h5"},[t._v("Score: "+t._s(t.candidate.score.total.toFixed(3)))])])],1),a("v-list",[a("v-list-item",[a("v-progress-linear",{attrs:{value:t.candidate.score.total/t.ranges.score.max*100}})],1),t._l(Object.keys(t.fields),(function(e){return a("v-list-item",{key:e},[a("v-list-item-content",[a("v-list-item-title",[a("v-row",[a("v-col",[t._v(t._s(t.fields[e].title))]),a("v-col",{staticClass:"text-right"},[t._v(t._s(t.getScore(t.candidate.score[e]))+" "),a("small",{directives:[{name:"show",rawName:"v-show",value:t.denoms[e],expression:"denoms[item]"}]},[t._v("/"+t._s(t.denoms[e]))])])],1)],1)],1)],1)}))],2)],1)},ne=[],oe=i["default"].extend({name:"CandidateScoreList",computed:{...(0,o.Se)("candidate",["candidate","ranges"])},data(){return{dateFormat:"MMM DD",dateTimeFormat:"YYYY/MM/DD hh:mm",fields:{inclusion:{title:"Inclusion"},spanInclusion:{title:"Span Inclusion"},discovered:{title:"Discovered"},nominated:{title:"Nominated"},rank:{title:"Rank"},bonded:{title:"Self bonded"},faults:{title:"Faults"},offline:{title:"Offline"},location:{title:"Location"},councilStake:{title:"Council Stake"},democracy:{title:"Democracy"},unclaimed:{title:"Unclaimed Eras"},aggregate:{title:"Aggregate"},randomness:{title:"Randomness"},total:{title:"Total"}},denoms:{updated:1652607338086,spanInclusion:100,inclusion:100,discovered:5,nominated:30,rank:5,bonded:50,faults:5,offline:2,location:40,councilStake:50}}},methods:{getScore(t){return t?t.toFixed(2):0},getTitle(t){return this.fields[t].title},formatDate(t,e){const a=e||this.dateTimeFormat;return b()(t).format(a)},dateSpan(t="5",e="weeks",a="YY/MM/DD"){const i=b()().add(-t,e).format(a),s=b()().add(-1,"days").format(a);return`${i} - ${s}`}}}),re=oe,ce=(0,m.Z)(re,se,ne,!1,null,null,null),le=ce.exports,de=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{height:"100%",elevation:"1",loading:t.loading}},[a("v-card-title",[t._v("Balance")]),a("v-card-text",[a("table",{attrs:{width:"100%"}},[a("tr",[a("td",[t._v("free")]),a("td",{staticClass:"text-right"},[t._v(t._s(t.toCoin(t.account.balance.free)))])]),a("tr",[a("td",[t._v("reserved")]),a("td",{staticClass:"text-right"},[t._v(t._s(t.toCoin(t.account.balance.reserved)))])]),a("tr",[a("td",[t._v("miscFrozen")]),a("td",{staticClass:"text-right"},[t._v(t._s(t.toCoin(t.account.balance.miscFrozen)))])]),a("tr",[a("td",[t._v("feeFrozen")]),a("td",{staticClass:"text-right"},[t._v(t._s(t.toCoin(t.account.balance.feeFrozen)))])])])]),a("Loading",{attrs:{loading:t.loading,absolute:!0,size:75}})],1)},he=[],ue=i["default"].extend({name:"CandidateBalance",props:{stash:{type:String,required:!0}},components:{Loading:z},computed:{...(0,o.rn)(["chainId"]),...(0,o.rn)("substrate",["decimals"]),...(0,o.Se)("substrate",["chainInfo"]),...(0,o.rn)("candidate",["candidate"])},data(){return{loading:!0,account:{nonce:0,balance:{free:0,reserved:0,miscFrozen:0,feeFrozen:0}}}},watch:{candidate:{deep:!0,handler(t){console.log("CandidateBalance.vue: watch.candidate()",t)}}},methods:{toCoin(t){const e=this.chainInfo?.tokenDecimals?.toJSON()[0]||0;return t/this.decimals[e]},async getBalance(){console.debug("CandidateBalance.vue: getBalance()...");try{await this.$substrate[this.chainId].isReady;const t=await this.$substrate[this.chainId].query.system.account(this.stash),{nonce:e,data:a}=t;return this.account.balance=a.toJSON(),this.account.nonce=e.toNumber(),this.loading=!1,console.debug("CandidateBalance.vue: getBalance(): account",this.account),!0}catch(t){return console.debug("CandidateBalance.vue: ERROR"),console.error(t),await this.$substrate.connect(this.chainId),!1}}},async created(){console.debug("CandidateBalance.vue created()",this.chainId)},mounted(){let t=0;const e=setInterval((async()=>{t++,this.$substrate[this.chainId]&&await this.getBalance()&&clearInterval(e),t>10&&(console.debug("CandidateBalance.vue: no api found, clearing interval..."),this.loading=!1,clearInterval(e))}),1e3)}}),me=ue,ve=(0,m.Z)(me,de,he,!1,null,null,null),pe=ve.exports,ge=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{height:"100%",elevation:"1",loading:t.loading}},[a("v-card-title",[t._v("Identity")]),a("v-card-text",[a("table",{attrs:{width:"100%"}},[a("tr",[a("td",[t._v("display")]),a("td",{staticClass:"text-right"},[t._v(t._s(t.candidate.identity.name))])]),a("tr",[a("td",[t._v("verified")]),a("td",{staticClass:"text-right"},[t._v(t._s(t.candidate.identity.verified)+" ("+t._s(t.judgements.length)+")")])]),a("tr",{directives:[{name:"show",rawName:"v-show",value:t.info.email,expression:"info.email"}]},[a("td",[t._v("email")]),a("td",{staticClass:"text-right"},[a("a",{attrs:{href:"mailto:"+t.info.email}},[t._v(t._s(t.info.email))])])]),a("tr",{directives:[{name:"show",rawName:"v-show",value:t.info.legal,expression:"info.legal"}]},[a("td",[t._v("legal")]),a("td",{staticClass:"text-right"},[t._v(t._s(t.info.legal))])]),a("tr",{directives:[{name:"show",rawName:"v-show",value:t.info.riot,expression:"info.riot"}]},[a("td",[t._v("riot")]),a("td",{staticClass:"text-right"},[a("a",{attrs:{href:"https://matrix.to/#/"+t.info.riot,target:"_blank"}},[t._v(t._s(t.info.riot))])])]),a("tr",{directives:[{name:"show",rawName:"v-show",value:t.info.twitter,expression:"info.twitter"}]},[a("td",[t._v("twitter")]),a("td",{staticClass:"text-right"},[a("a",{attrs:{href:"https://twitter.com/"+t.info.twitter,target:"_blank"}},[t._v(t._s(t.info.twitter))])])]),a("tr",{directives:[{name:"show",rawName:"v-show",value:t.info.web,expression:"info.web"}]},[a("td",[t._v("web")]),a("td",{staticClass:"text-right"},[t._v(t._s(t.info.web))])])])]),a("Loading",{attrs:{loading:t.loading,absolute:!0,size:75}})],1)},fe=[],_e=a(6997),be=i["default"].extend({name:"CandidateIdentity",components:{Loading:z},computed:{...(0,o.rn)(["chainId"]),...(0,o.Se)("candidate",["candidate"])},watch:{candidate:{deep:!0,handler(t){console.log("candidate changed",t)}}},data(){return{loading:!0,deposit:0,judgements:[],info:{display:"",email:"",legal:"",riot:"",twitter:"",web:""}}},methods:{async getIdentity(){try{if(console.debug("candidate:",this.candidate),!this.candidate)return!1;const t=await this.$substrate[this.chainId].query.identity.identityOf(this.candidate.stash);console.debug("id",t);const e=t.toJSON();return console.debug("idj",e),e&&(this.deposit=e.deposit,this.info={display:e.info.display.raw?(0,_e.r)(e.info.display.raw):"",email:e.info.email.raw?(0,_e.r)(e.info.email.raw):"",legal:e.info.legal.raw?(0,_e.r)(e.info.legal.raw):"",riot:e.info.riot.raw?(0,_e.r)(e.info.riot.raw):"",twitter:e.info.twitter.raw?(0,_e.r)(e.info.twitter.raw):"",web:e.info.web.raw?(0,_e.r)(e.info.web.raw):""},this.judgements=e.judgements),this.loading=!1,!0}catch(t){return console.debug("CandidnateIdentity.vue: OOPs"),console.error(t),!1}}},async created(){console.debug(`CandidateIdentity.vue created(): chain=${this.chainId}`),this.$substrate[this.chainId]||await this.$substrate.connect(this.chainId),await this.$substrate[this.chainId].isReady;let t=0;const e=setInterval((async()=>{t++,this.$substrate[this.chainId]?await this.getIdentity()&&clearInterval(e):console.debug("not connected?",this.chainId),t>10&&(console.debug("CandidateIdentity.vue: no api found, clearing interval..."),this.loading=!1,clearInterval(e))}),1e3)}}),Ie=be,we=(0,m.Z)(Ie,ge,fe,!1,null,null,null),ye=we.exports,ke=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-toolbar",{attrs:{elevation:"0"}},[a("v-toolbar-title",[t._v("Nominators ("+t._s(t.totalNominations)+" "+t._s(t.chainId)+")")])],1),a("v-data-table",{attrs:{headers:t.headers,items:t.mapItems},scopedSlots:t._u([{key:"item.shortStash",fn:function(e){var i=e.item;return[a("div",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.clickItem(i)}}},[a("ClickToCopy",{attrs:{display:i.shortStash,text:i.accountId}})],1)]}},{key:"item.is1kv",fn:function(e){var i=e.item;return[a("v-menu",[t._v(" "+t._s(i.is1kv?"Yes":"No")+" ")])]}},{key:"item.menu",fn:function(e){var i=e.item;return[a("a",{attrs:{href:"https://"+t.chainId+".subscan.io/account/"+i.accountId,target:"_blank"}},[t._v("[link]")])]}}],null,!0)}),a("Loading",{attrs:{loading:t.loading,absolute:!0,size:75}})],1)},Se=[],xe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("span",{staticClass:"click-to-copy",on:{click:function(e){return e.stopPropagation(),t.copyToClipboard(t.text)}}},[t._v(t._s(t.display||t.text))]),a("v-snackbar",{attrs:{absolute:!1,bottom:""},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.attrs;return[a("v-btn",t._b({attrs:{color:"pink",text:""},on:{click:function(e){t.snackbar=!1}}},"v-btn",i,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.snackText)+" ")])],1)},Ce=[],Te=(a(1703),i["default"].extend({props:["text","display"],data(){return{snackbar:!1,snackText:""}},methods:{async copyToClipboard(t){if(navigator.clipboard&&window.isSecureContext)navigator.clipboard.writeText(t);else{const e=document.createElement("textarea");e.value=t,e.style.position="fixed",e.style.left="-999999px",e.style.top="-999999px",document.body.appendChild(e),e.focus(),e.select(),await new Promise(((t,a)=>{document.execCommand("copy")?t(1):a(new Error("no reason")),e.remove()}))}this.snackText="Copied to clipboard",this.snackbar=!0,setTimeout((()=>{this.snackbar=!1}),2e3)}}})),Ee=Te,Ae=(0,m.Z)(Ee,xe,Ce,!1,null,"011911f9",null),$e=Ae.exports,je=a(4232);je.ZP`
  query getValidatorView ($chain: String!, $stash: String) {
    Validator (chain: $chain, stash: $stash) {
      stash
      name
      shortStash
      nominators {
        accountId
        account {
          data {
            free
            reserved
            miscFrozen
            feeFrozen
          }
          #nonce
          #consumers
          #providers
          #sufficients
        }
        is1kv {
          bonded
          avgStake
        }
        targetIds
      }
    }
  }
`,je.ZP`
  query getValidator ($chain: String!, $stash: String!) {
    Validator (chain: $chain, stash: $stash) {
      # Fields to retrieve
      stash
      shortStash
      name
      identity {
        info {
          display
        }
        sub_id
        parent_identity {
          info {
            display
            email
            legal
            twitter
            riot
            web
          }
        }
      }
      nominators {
        accountId
      }
      updatedAt
    }
  }
`;const De=je.ZP`
  query ValidatorNominators($chain: String!, $stash: String) {
    Validator(chain: $chain, stash: $stash) {
      stash
      nominators {
        accountId
        is1kv {
          address
        }
        identity {
          info {
            display
          }
        }
        account {
          data {
            free
            reserved
            miscFrozen
            feeFrozen
          }
        }
      }
    }
  }
`;je.ZP`
  query getValidators ($chain: String!, $stashes: [String], $search: String, $offset: Int, $limit: Int) {
    ValidatorCount(chain: $chain, search: $search)
    Validators (chain: $chain, stashes: $stashes, search: $search, offset: $offset, limit: $limit) {
      # Fields to retrieve
      stash
      shortStash
      name
      prefs {
        commission
      }
      nominators {
        accountId
      }
      is1kv {
        name
        active
      }
    }
  }
`,je.ZP`
  query getValidatorNames ($chain: String!, $stashes: [String]) {
    Validators (chain: $chain, stashes: $stashes) {
      # Fields to retrieve
      stash
      shortStash
      name
    }
  }
`;function Le(t){return t.slice(0,6)+"..."+t.slice(-6)}var Ne=i["default"].extend({props:{stash:{type:String,required:!0}},components:{ClickToCopy:$e,Loading:z},computed:{...(0,o.rn)(["chainId"]),...(0,o.rn)("substrate",["decimals"]),...(0,o.Se)("substrate",["chainInfo"]),mapItems(){return this.items.map((t=>(t.shortStash=this.shortStash(t.accountId),t.balance=this.toCoin(t.account.data.free),t)))},totalNominations(){return this.toCoin(this.items.reduce(((t,e)=>t+(parseInt(e.account?.data?.free)||0)),0))}},data(){return{loading:!1,items:[],headers:[{text:"Nom.",value:"shortStash"},{text:"Bal.",value:"balance",align:"right"},{text:"1KV",value:"is1kv",width:"15px",align:"right"},{text:"#",value:"menu",width:"15px",align:"right"}]}},methods:{clickItem(t){},shortStash:t=>Le(t),toCoin(t){const e=this.chainInfo?.tokenDecimals?.toJSON()[0]||0;return(t/this.decimals[e]).toLocaleString("en-GB",{maximumFractionDigits:4})},async getNominators(){this.loading=!0;const t=await this.$apollo.query({query:De,variables:{chain:this.chainId,stash:this.stash}});console.debug("data",t.data),this.items=t.data.Validator?.nominators||[],this.loading=!1},getNominatorsFromApi(){var t=0;const e=setInterval((async()=>{t++;try{if(this.$substrate[this.chainId]){var a="12WPkGHWYhL7Vdtwqbjo7ugbaoajr8KLMChnE3puX4Q5Cxsf";a=this.stash;const t=await this.$substrate[this.chainId].query.staking.nominators.entries();console.debug(`got ${t.length} entries !!`);t.map((([t])=>""+t.toHuman()[0]));const i=await this.$substrate[this.chainId].query.staking.validators.entries(a);i.forEach((([t,e])=>{console.log("vkey",t.toString(),e.toString())})),clearInterval(e)}}catch(i){console.warn(i),await this.$substrate[this.chainId].connect()}t>10&&(console.warn("CandidateNominators.vue: no API found"),clearInterval(e))}),1e3)}},async mounted(){console.debug("CandidateNominators.vue: mounted()",this.chainId,this.stash),this.getNominators()}}),Oe=Ne,Pe=(0,m.Z)(Oe,ke,Se,!1,null,null,null),Fe=Pe.exports,Re=i["default"].extend({name:"Candidate",components:{CandidateExternalLinks:ie,CandidateScore:zt,CandidateValidity:Vt,CandidateIcons:Wt,Identicon:gt.ZP,Loading:z,CandidateScoreList:le,CandidateBalance:pe,CandidateIdentity:ye,CandidateNominators:Fe},props:{},computed:{...(0,o.Se)("candidate",["loading","candidate","ranges"]),...(0,o.rn)(["chainId"]),...(0,o.rn)("polkadot",{cache:"cache"}),balance(){return this.cache.items[this.candidate.stash]||{}}},data(){return{dateTimeFormat:"YYYY/MM/DD hh:mm",activeEra:{},header:{},unsubscribe(){}}},watch:{chainId(t){this.$router.push(`/${t}/candidate`)}},filters:{formatDate(t){return console.debug(t,this.dateTimeFormat),b()(t).format(this.dateTimeFormat)}},methods:{test(){this.$store.dispatch("candidate/setLoading",{chain:this.chainId,value:!0}),setTimeout((()=>{this.$store.dispatch("candidate/setLoading",{chain:this.chainId,value:!1})}),5e3)},timeAgo(t){return b()(t).fromNow()},isValid(t){const e=t.find((t=>!1===t.valid));return!e},formatDate(t){return b()(t).format(this.dateTimeFormat)},formatStash(t,e=8){return t&&""!==t?t.length<=2*e+3?t:t.substr(0,e)+"..."+t.substr(t.length-e):t}},async created(){if(console.debug("Candidate.vue: created()",this.candidate,this.$route.params),!this.chainId){console.debug("no chain?",this.$route.params),await this.$store.dispatch("setChain",{chainId:this.$route.params.chainId}),console.debug("App.vue: reading chain info()...");const t=await this.$substrate[this.chainId].registry.getChainProperties();console.log("chainInfo.tokenDecimals",t.tokenDecimals.toJSON()[0]),await this.$store.dispatch("substrate/setChainInfo",{chain:this.chainId,chainInfo:t})}this.candidate.stash&&""!==this.candidate.stash||(console.debug("no stash?",this.$route.params),await this.$store.dispatch("candidate/setCandidate",{chainId:this.chainId,stash:this.$route.params.stash}),console.debug(this.candidate))},async mounted(){window.scrollTo(0,0)},beforeDestroy(){console.debug("unmounting..."),null!==this.unsubscribe&&this.unsubscribe()}}),Ve=Re,Me=(0,m.Z)(Ve,Dt,Lt,!1,null,"7a9cc423",null),Ze=Me.exports,Be=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[t._v("Pools ("+t._s(t.chainId)+")")]),a("v-spacer"),a("v-toolbar-items",[a("v-btn",{attrs:{small:"",icon:""},on:{click:function(e){return t.reload()}}},[a("v-icon",[t._v("mdi-refresh")])],1)],1)],1),a("v-card-text",[a("PoolTable",{staticClass:"d-none d-sm-block",attrs:{loading:t.loading},on:{clickRow:t.gotoItem}}),a("PoolList",{staticClass:"d-block d-sm-none",attrs:{loading:t.loading},on:{clickRow:t.gotoItem}})],1)],1)},Ge=[],qe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-table",{attrs:{loading:t.loading,items:t.list,headers:t.headers},on:{"click:row":t.onClickRow},scopedSlots:t._u([{key:"item.points",fn:function(e){var a=e.item;return[t._v(" "+t._s(t.toCoin(a.points))+" ")]}}],null,!0)})},ze=[],He=i["default"].extend({props:{loading:{type:Boolean}},computed:{...(0,o.Se)("pool",["list"]),...(0,o.rn)("substrate",["decimals"]),...(0,o.Se)("substrate",["chainInfo"])},data(){return{headers:[{text:"id",value:"id"},{text:"name",value:"name"},{text:"state",value:"state"},{text:"memberCounter",value:"memberCounter"},{text:"points",value:"points",align:"right"}]}},methods:{onClickRow(t){this.$emit("clickRow",t)},toCoin(t){const e=this.chainInfo?.tokenDecimals?.toJSON()[0]||0;return((t||0)/this.decimals[e]).toFixed(4)}}}),Ye=He,Ue=(0,m.Z)(Ye,qe,ze,!1,null,null,null),Ke=Ue.exports,Je=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list",t._l(t.list,(function(e){return a("v-list-item",{key:e.id,on:{click:function(a){return t.onClickRow(e,a)}}},[a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(e.id)+". "+t._s(e.name))]),a("v-list-item-subtitle",[t._v(" "+t._s(e.state)+": "+t._s(e.memberCounter)+" members, "+t._s(t.toCoin(e.points))+" "+t._s(t.chainInfo.tokenSymbol)+" ")])],1)],1)})),1)},We=[],Qe=i["default"].extend({name:"PoolList",props:{},computed:{...(0,o.Se)("pool",["list"]),...(0,o.rn)("substrate",["decimals"]),...(0,o.Se)("substrate",["chainInfo"])},methods:{onClickRow(t,e){console.log(t,e),this.$emit("clickRow",t)},toCoin(t){const e=this.chainInfo?.tokenDecimals?.toJSON()[0]||0;return((t||0)/this.decimals[e]).toFixed(4)}}}),Xe=Qe,ta=(0,m.Z)(Xe,Je,We,!1,null,null,null),ea=ta.exports,aa=i["default"].extend({name:"Pools",components:{PoolTable:Ke,PoolList:ea},computed:{...(0,o.rn)(["chainId"]),...(0,o.rn)("pool",["apiConnected"]),...(0,o.Se)("pool",["list"]),...(0,o.rn)("substrate",["decimals"]),...(0,o.Se)("substrate",["chainInfo"])},data(){return{loading:!1,interval:{}}},watch:{chainId(t){this.$store.dispatch("pool/setChainId",t)}},methods:{async gotoItem(t,e){console.debug("gotoItem()",t,e),await this.$store.dispatch("pool/setPool",t),this.$router.push(`/${this.chainId}/pool/${t.id}`)},async loadPools(){if(console.debug("Pools.vue: searching for api",this.chainId),await this.$substrate[this.chainId].isReady,!this.loading)try{const n=this.$substrate[this.chainId];var t;t=await n.query.nominationPools.lastPoolId(),console.log("lastPool",t.toNumber()),this.loading=!0;for(var e=[],a=1;a<=t.toNumber();a++)e.push(n.query.nominationPools.bondedPools(a));var i=await Promise.all(e);console.debug(i),e=[];var s=[];i=i.map(((t,e)=>{var a=t.toJSON()||{state:"Closed",memberCounter:0,roles:{}};return a.id=e+1,a.name=a.roles?.depositor||"unknown",s.push(n.query.nominationPools.metadata(a.id)),a})),s=await Promise.all(s),s.forEach(((t,e)=>{i[e].name=(0,_e.r)(t.toString())})),await this.$store.dispatch("pool/setList",i),console.debug("Pools.vue: clearing interval..."),this.loading=!1}catch(n){console.debug(n),this.loading=!1}return 1},reload(){this.loadPools()},clearAllIntervals(){const t=parseInt(this.interval.toString());for(var e=0;e<=t;e++)try{clearInterval(e)}catch(a){console.debug("Interval "+e+" not valid")}}},async created(){console.debug("Pools.vue created()",this.chainId,this.list?.length),this.list&&0!==this.list.length||this.reload()},beforeDestroy(){this.interval&&clearInterval(this.interval)}}),ia=aa,sa=(0,m.Z)(ia,Be,Ge,!1,null,null,null),na=sa.exports,oa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-title",[a("v-btn",{attrs:{small:"",icon:""},on:{click:function(e){return t.$router.go(-1)}}},[a("v-icon",[t._v("mdi-arrow-left")])],1),t._v(" ¬† "),a("v-toolbar-title",{staticClass:"nowrap"},[t._v("Pool "+t._s(t.pool.id)+". "+t._s(t.pool.name))])],1),a("v-card-text",[a("v-sheet",[a("table",{attrs:{width:"100%"}},[a("tbody",[a("tr",[a("td",{attrs:{width:"20%"}},[t._v("Points")]),a("td",[t._v(t._s(t.toCoin(t.pool.points))+" "+t._s(t.chainInfo.tokenSymbol))])]),a("tr",[a("td",[t._v("State")]),a("td",[t._v(t._s(t.pool.state))])]),a("tr",[a("td",[t._v("Roles")]),a("td",[a("table",{attrs:{width:"100%"}},[a("tr",[a("td",{attrs:{width:"30%"}},[t._v("Root")]),a("td",{attrs:{align:"right"}},[a("AccountLink",{attrs:{accountId:t.pool.roles.root}})],1)]),a("tr",[a("td",[t._v("Nominator")]),a("td",{attrs:{align:"right"}},[a("AccountLink",{attrs:{accountId:t.pool.roles.nominator}})],1)]),a("tr",[a("td",[t._v("Depositor")]),a("td",{attrs:{align:"right"}},[a("AccountLink",{attrs:{accountId:t.pool.roles.depositor}})],1)]),a("tr",[a("td",[t._v("State Toggler")]),a("td",{attrs:{align:"right"}},[a("AccountLink",{attrs:{accountId:t.pool.roles.stateToggler}})],1)])])])])])])]),a("PoolMembers",{attrs:{poolId:t.id}})],1)],1)},ra=[],ca=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("a",{attrs:{href:t.href,target:"_blank"}},[t._v(t._s(t.textStr))]),t._v(" "),a("sup",[a("v-icon",{attrs:{"x-small":""}},[t._v("mdi-open-in-new")])],1)])},la=[],da=i["default"].extend({props:{accountId:{type:String,required:!0},role:{type:String,required:!1,default:"account"},provider:{type:String,required:!1,default:"https://kusama.subscan.io/¬ßrole¬ß/¬ßaccountId¬ß"},text:{type:String,required:!1}},computed:{href(){return this.provider.replace("¬ßrole¬ß",this.role).replace("¬ßaccountId¬ß",this.accountId)},textStr(){return this.text?this.text:this.$utils.shortStash(this.accountId)}}}),ha=da,ua=(0,m.Z)(ha,ca,la,!1,null,null,null),ma=ua.exports,va=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-toolbar",{attrs:{elevation:"0"}},[a("v-toolbar-title",[t._v("Pool Members")])],1),a("PoolMemberTable",{staticClass:"d-none d-sm-block",attrs:{list:t.items}}),a("PoolMemberList",{staticClass:"d-block d-sm-none",attrs:{list:t.items}}),a("Loading",{attrs:{loading:t.loading,absolute:!0,size:75}})],1)},pa=[],ga=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-table",{attrs:{headers:t.headers,items:t.list},on:{"click:row":t.clickRow},scopedSlots:t._u([{key:"item.accountId",fn:function(e){var i=e.item;return[a("div",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.clickRow(i)}}},[t._v(" "+t._s(i.accountId)+" ")])]}},{key:"item.points",fn:function(e){var a=e.item;return[t._v(" "+t._s(t.toCoin(a.points))+" ")]}},{key:"item.menu",fn:function(t){var e=t.item;return[a("AccountLink",{attrs:{accountId:e.accountId,text:"link"}})]}}],null,!0)})},fa=[],_a=i["default"].extend({name:"PoolMemberTable",components:{AccountLink:ma},props:{list:{type:Array,required:!0}},computed:{...(0,o.rn)(["chainId"]),...(0,o.rn)("substrate",["decimals"]),...(0,o.Se)("substrate",["chainInfo"])},data(){return{items:[],headers:[{text:"Member",value:"accountId"},{text:"Points",value:"points",align:"right"},{text:"#",value:"menu",width:"75px",align:"right",sortable:!1}]}},methods:{toCoin(t){const e=this.chainInfo?.tokenDecimals?.toJSON()[0]||0;return(t/this.decimals[e]).toLocaleString("en-GB",{maximumFractionDigits:4})},clickRow(t){this.$emit("clickRow",t)}}}),ba=_a,Ia=(0,m.Z)(ba,ga,fa,!1,null,null,null),wa=Ia.exports,ya=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list",{attrs:{headers:t.headers,items:t.list},on:{"click:row":t.clickRow}},t._l(t.list,(function(e){return a("v-list-item",{key:e.id},[a("v-list-item-content",[a("v-list-item-title",[t._v(" "+t._s(t.$utils.shortStash(e.accountId))+" ")]),a("v-list-item-subtitle",[t._v(" Points: "+t._s(t.toCoin(e.points))+" ")])],1),a("v-list-item-action",[a("AccountLink",{attrs:{accountId:e.accountId,text:"link"}})],1)],1)})),1)},ka=[],Sa=i["default"].extend({name:"PoolMemberList",components:{AccountLink:ma},props:{list:{type:Array,required:!0}},computed:{...(0,o.rn)(["chainId"]),...(0,o.rn)("substrate",["decimals"]),...(0,o.Se)("substrate",["chainInfo"])},data(){return{items:[],headers:[{text:"Member",value:"accountId"},{text:"Points",value:"points",align:"right"},{text:"#",value:"menu",width:"75px",align:"right",sortable:!1}]}},methods:{toCoin(t){const e=this.chainInfo?.tokenDecimals?.toJSON()[0]||0;return(t/this.decimals[e]).toLocaleString("en-GB",{maximumFractionDigits:4})},clickRow(t){this.$emit("clickRow",t)}}}),xa=Sa,Ca=(0,m.Z)(xa,ya,ka,!1,null,null,null),Ta=Ca.exports;je.ZP`
  query getPoolView ($chain: String!, $id: Int!) {
    Pool (chain: $chain, id: $id) {
      id
      state
      points
      claimable
      name
      members {
        accountId
        points
      }
    }
  }
`;const Ea=je.ZP`
  #query getPoolMembers ($chain: String!, $id: Int!, $ids: [String]) {
  query getPoolMembers ($chain: String!, $id: Int!) {
    Pool (chain: $chain, id: $id) {
      id
      state
      points
      claimable
      name
      members {
        accountId
        points
      }
    }
    #Nominators(chain: $chain, ids: $ids) {
    #  accountId
    #    sub_id
    #  identity {
    #    parent_identity {
    #      info {
    #        display
    #        email
    #        twitter
    #        web
    #      }
    #    }
    #    info {
    #      display
    #      email
    #      twitter
    #      web
    #    }
    #  }
    #  targets
    #}
  }
`;je.ZP`
  query getPools ($chain: String!, $ids: [Int]) {
    Pools(chain: $chain, ids: $ids) {
      members {
        points
        accountId
      }
      id
      name
      state
      points
      claimable
    }
  }
`;var Aa=i["default"].extend({props:{poolId:{type:Number,required:!0}},components:{PoolMemberTable:wa,PoolMemberList:Ta,Loading:z},computed:{...(0,o.rn)(["chainId"]),...(0,o.rn)("substrate",["decimals"]),...(0,o.Se)("substrate",["chainInfo"]),tokenSymbol(){return this.chainInfo.tokenSymbol}},data(){return{loading:!1,items:[],headers:[{text:"Member",value:"accountId"},{text:"Points",value:"points",align:"right"},{text:"#",value:"menu",width:"15px",align:"right"}]}},methods:{clickItem(t){},async getMembers(){this.loading=!0;const t=await this.$apollo.query({query:Ea,variables:{chain:this.chainId,id:this.poolId}});console.debug("data",t.data),this.items=t.data.Pool?.members||[],this.loading=!1}},async mounted(){console.debug("PoolMembers.vue: mounted()",this.chainId,this.poolId),this.getMembers()}}),$a=Aa,ja=(0,m.Z)($a,va,pa,!1,null,null,null),Da=ja.exports,La=i["default"].extend({props:{id:{type:Number,required:!1}},components:{AccountLink:ma,PoolMembers:Da},computed:{...(0,o.rn)(["chainId"]),...(0,o.rn)("pool",["pool"]),...(0,o.rn)("substrate",["decimals"]),...(0,o.Se)("substrate",["chainInfo"])},data(){return{loading:!1}},methods:{toCoin(t){const e=this.chainInfo?.tokenDecimals?.toJSON()[0]||0;return(t/this.decimals[e]).toLocaleString("en-GB",{maximumFractionDigits:4})}},async created(){console.debug("Pool.vue created()",this.chainId,this.pool,this.$route.params),this.pool&&this.pool.id===parseInt(this.$route.params.id)||(console.debug("ID not same, loading id"),console.debug("params.id",typeof parseInt(this.$route.params.id)),console.debug("pool.id",typeof this.pool?.id),this.$store.dispatch("pool/setPool",{id:parseInt(this.$route.params.id)}))}}),Na=La,Oa=(0,m.Z)(Na,oa,ra,!1,null,"38aabf86",null),Pa=Oa.exports,Fa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[t._v("Docs")])],1),a("v-card",[a("v-card-text",[a("p",[t._v("This is an experimental object browser for exploring the polkadot.js api object.")]),a("p",[t._v("The polkadot.js api documantation is available "),a("a",{attrs:{href:"https://polkadot.js.org/docs/api/start/api.query/",target:"_blank"}},[t._v("here.")])]),a("p",[t._v("Javascript Introspection is not complete, and won't ever be complete - it's not a goal of the language")])])],1),a("v-breadcrumbs",{attrs:{items:t.breadcrumbs},scopedSlots:t._u([{key:"item",fn:function(e){var i=e.item;return[0===i.level?a("v-btn",{staticClass:"text-none",attrs:{small:"",outlined:""},on:{click:function(e){return t.deselect()}}},[t._v(t._s(i.text))]):t._e(),0!==i.level?a("v-btn",{staticClass:"text-none",attrs:{small:"",outlined:""},on:{click:function(e){return t.deselect(i)}}},[t._v(t._s(i.text))]):t._e()]}}])}),a("v-list",[a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",[t._v("Attributes:")]),a("v-list-item-subtitle",[a("v-row",t._l(Object.keys(t.parsed.attributes),(function(e,i){return a("v-col",{key:i},[a("v-btn",{staticClass:"text-none",attrs:{text:"",outlined:""},on:{click:function(a){return t.select(e)}}},[t._v(t._s(e))])],1)})),1)],1)],1)],1)],1),a("v-list",[a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",[t._v("Methods:")]),a("v-list-item-subtitle",t._l(t.parsed.methods,(function(e){return a("v-col",{key:e.name},[a("span",{staticClass:"text-none",attrs:{text:"",outlined:""},on:{click:function(a){return t.selectMethod(e.name)}}},[t._v(t._s(e.name)+"()"),a("br"),t._v(" "+t._s(e.docs))])])})),1)],1)],1)],1),a("v-row")],1)},Ra=[],Va=i["default"].extend({name:"Docs",components:{},computed:{object(){return this.obj}},data(){return{loading:!1,breadcrumbs:[{text:"Polkadot",disabled:!0,type:"object",level:0}],obj:"api",level:1,parsed:{}}},watch:{obj(t){this.loading=!0,this.parseObj(this.$substrate.polkadot.api[t],null,null),this.loading=!1}},methods:{select(t){this.level+=1,this.breadcrumbs.push({text:t,type:"attribute",level:this.level});let e=this.$substrate.polkadot;this.breadcrumbs.forEach(((t,a)=>{0!==a&&(e=e[t.text])})),this.parsed=this.parseObj(e,null,null)},async selectMethod(t){this.level+=1,console.debug(t);let e=this.$substrate.polkadot;for(let i=1;i<this.breadcrumbs.length;i++)e=e[this.breadcrumbs[i].text];const a=await e[t]();console.debug("test:",a.toString()),this.breadcrumbs.push({text:t,type:"method",level:this.level}),this.parseBreadCrumbs()},getFunctionDocs(t){const e=JSON.stringify(t),a=JSON.parse(e);return a.docs},deselect(t){if(console.debug(t),t){console.debug(t),this.level=t.level;for(let e=this.breadcrumbs.length;e>t.level;e--)this.breadcrumbs.pop();this.parseBreadCrumbs()}else this.level=1,this.breadcrumbs=[{text:"Polkadot",disabled:!0,type:"object",level:0}],this.parsed=this.parseObj(this.$substrate.polkadot,!1,1)},parseBreadCrumbs(){let t=this.$substrate.polkadot;for(let e=1;e<this.breadcrumbs.length;e++)console.debug("::",this.breadcrumbs[e].text),t=t[this.breadcrumbs[e].text];this.parsed=this.parseObj(t,null,null)},parseObj(t,e=!1,a=1){const i={class:e||t.name,methods:{},attributes:{},children:{}};return Object.keys(t).forEach((e=>{try{switch(typeof t[e]){case"object":Array.isArray(t[e])?i.children[e]=a?this.parseObj(t[e],!1,a-1):"Array":i.attributes[e]=a?this.parseObj(t[e],!1,a-1):"Object";break;case"function":i.methods[e]={name:e,docs:this.getFunctionDocs(t[e])};break;case"string":i.attributes[e]="string";break;case"number":i.attributes[e]="number";break;case"boolean":i.attributes[e]="boolean";break;default:console.debug(`${e}: is default: ${typeof t[e]}`),i.attributes[e]=t[e]}}catch(s){i.attributes[e]="undefined?"}})),i}},mounted(){console.debug("Docs.vue: mounted()"),this.parsed=this.parseObj(this.$substrate.polkadot,!1,1)}}),Ma=Va,Za=(0,m.Z)(Ma,Fa,Ra,!1,null,null,null),Ba=Za.exports;i["default"].use(J.Z);const Ga="metaspan.io",qa=[{path:"/",name:"Home",component:nt},{path:"/about",name:"About",component:()=>a.e(443).then(a.bind(a,5575))},{path:"/kusama",name:"KusamaHome",component:ht,props:{chainId:"kusama"},children:[{path:"candidate",name:"KusamaCandidates",component:jt,meta:{title:"metaspan.io - 1kv"},props:{chain:"kusama"}},{path:"candidate/:stash",name:"KusamaCandidate",component:Ze,props:!0,meta:{title:"metaspan.io - kusama 1kv"}},{path:"pool",name:"KusamaPools",component:na,meta:{title:"metaspan.io - pools"},props:!0},{path:"pool/:id",name:"KusamaPool",component:Pa,props(t){return{id:parseInt(t.params.id)}},meta:{title:"metaspan.io - kusama pool"}}]},{path:"/polkadot",name:"PolkadotHome",component:ht,props:{chainId:"polkadot"},children:[{path:"candidate",name:"PolkadotCandidates",component:jt,meta:{title:"metaspan.io - 1kv"},props:{chain:"polkadot"}},{path:"candidate/:stash",name:"PolkadotCandidate",component:Ze,props:!0,meta:{title:"metaspan.io - polkadot 1kv"}},{path:"pool",name:"PolkadotPools",component:na,meta:{title:"metaspan.io - pools"},props:!0}]},{path:"/docs",name:"Docs",component:Ba,meta:{title:"metaspan.io - api docs"}}],za=new J.Z({mode:"history",base:"/",routes:qa});za.beforeEach(((t,e,a)=>(document.title=t.meta?.title||Ga,a())));var Ha=za;const Ya={namespaced:!0,state:{api:null,chainId:"kusama",decimals:{0:1,1:10,2:100,3:1e3,4:1e4,5:1e5,6:1e6,7:1e7,8:1e8,9:1e9,10:1e10,11:1e11,12:1e12},polkadot:{connected:!1,chainInfo:{}},kusama:{connected:!1,chainInfo:{}}},getters:{chainInfo(t){return t[t.chainId]?.chainInfo||{}},connected(t){return t[t.chainId]?.connected}},mutations:{INIT(t,{api:e}){t.api=e},SET_CHAIN(t,e){t.chainId=e},SET_CHAIN_INFO(t,{chainId:e,chainInfo:a}){t[e].chainInfo=a},SET_API_CONNECTED(t,{chainId:e,connected:a}){t[e].connected=a}},actions:{async init({commit:t}){console.debug("store/modules/substrate.ts: init()")},async setChain({commit:t},e){console.debug("store/modules/substrate.ts: setChain()",e),await t("SET_CHAIN",e)},async apiClose({dispatch:t}){console.debug("store/modules/substrate.ts: apiclose()"),await t("apiDisconnected",{chainId:"polkadot"}),await t("apiDisconnected",{chainId:"kusama"})},async setChainInfo({commit:t},{chainId:e,chainInfo:a}){console.debug("store/modules/substrate.ts: setChainInfo()",e,a),await t("SET_CHAIN_INFO",{chainId:e,chainInfo:a})},async apiConnected({commit:t},e){console.debug("store/modules/substrate.ts: apiConnected()",e),t("SET_API_CONNECTED",{chainId:e,connected:!0})},async apiDisconnected({commit:t},e){console.debug("store/modules/substrate.ts: apiDisconnected()",e),t("SET_API_CONNECTED",{chainId:e,connected:!1})},async apiError({state:t},e){console.log("API ERROR chain",t.chainId),console.error(e)}}};var Ua=Ya,Ka=a(2134),Ja=a(114);const Wa={polkadot:{parity:"wss://rpc.polkadot.io",onFinality:"wss://polkadot.api.onfinality.io/public-ws"},kusama:{onFinality:"wss://kusama.api.onfinality.io/public-ws",parity:"wss://kusama-rpc.polkadot.io"},parallel:{onFinality:"wss://parallel.api.onfinality.io/public-ws"}},Qa={namespaced:!0,state:{endpoints:Wa,endpoint:"parity",loading:[],api:"",list:[],cache:{items:{}},candidate:null,validators:[],nominators:[],updatedAt:null,ranges:{},pagination:{},options:{},account:null,filter:{},search:"",favourites:[]},getters:{loading(t){return t.loading.filter((t=>!0===t.loading)).length>0},kusamaEndpoints(t){return Object.keys(t.endpoints.kusama).map((e=>({id:e,url:t.endpoints.kusama[e]})))}},mutations:{SET_LOADING(t,e){const a=t.loading.findIndex((t=>t.key===e.key));a>-1?t.loading[a].loading=e.loading:t.loading.push(e)},SET_API(t,e){t.api=e},SET_ENDPOINT(t,e){t.endpoint=e},SET_LIST(t,e){let a=[],i=[];t.list=e,t.updatedAt=new Date,i=e.map((t=>t.rank)).sort(((t,e)=>t-e)),a=[...new Set(i)],a=a.slice(.055*a.length,.854*a.length),console.debug("length",a.length,"min:",Math.min(...a),"max:",Math.max(...a)),t.ranges.rank={min:Math.min(...a),max:Math.max(...a)}},SET_CACHE(t,{stash:e,model:a}){t.cache.items[e]={updatedAt:new Date,model:a}},SET_ACCOUNT(t,e){t.account=e},SET_NOMINATORS(t,e){t.nominators=e},SET_VALIDATORS(t,e){t.validators=e},SET_PAGINATION(t,e){t.pagination=e},SET_OPTIONS(t,e){t.options=e},SET_FILTER(t,e){t.filter=e},SET_SEARCH(t,e){t.search=e},TOGGLE_FAV(t,e){const a=t.favourites.findIndex((t=>t===e));a>-1?t.favourites=t.favourites.filter((t=>t!==e)):t.favourites.push(e)}},actions:{async setEndpoint({state:t,commit:e,dispatch:a},i){if(t.endpoints[i]){await e("SET_ENDPOINT",i),window.$polkadot&&(console.debug("disconnecting api"),await window.$polkadot.disconnect());const t=new Ka.U(i),a=await Ja.G.create({provider:t});window.$polkadot=a}},async setValidator({state:t,commit:e},a){if(!t.cache[a]||b()().diff(b()(t.cache[a].updatedAt),"seconds")>60)try{await e("SET_LOADING",{key:"validator",loading:!0});try{const i=new Ka.U(Wa.kusama[t.endpoint]),s=await Ja.G.create({provider:i}),n=await s.query.system.account(a);await e("SET_CACHE",{stash:a,model:n})}catch(i){console.debug("error"),console.error(i)}}catch(i){console.debug("OOPS, caught an error"),console.error(i)}finally{await e("SET_LOADING",{key:"validator",loading:!1})}else console.debug("cache:",a,"is",b()().diff(b()(t.cache[a].updatedAt),"seconds"),"secs old")},async nominators({state:t,commit:e}){await e("SET_LOADING",{key:"nominators",loading:!0});const a=new Ka.U(Wa.kusama[t.endpoint]),i=await Ja.G.create({provider:a}),s=await i.query.staking.nominators.keys();console.debug("nominators.keys",s),await e("SET_NOMINATORS",s),await e("SET_LOADING",{key:"nominators",loading:!1})},async validators({state:t,commit:e}){await e("SET_LOADING",{key:"validators",loading:!0});const a=new Ka.U(Wa.kusama[t.endpoint]),i=await Ja.G.create({provider:a}),s=await i.query.staking.validators();console.debug("validators",s),await e("SET_VALIDATORS",s),await e("SET_LOADING",{key:"validators",loading:!1})}}};var Xa=Qa,ti=a(6166),ei=a.n(ti);const ai={namespaced:!0,modules:{},state:{updatedAt:null,loading:!1,pagination:{page:1,itemsPerPage:15},options:{page:1,itemsPerPage:10,sortBy:"name",sortDesc:!1},search:"",filter:{valid:!1,active:!1},ranges:{rank:{min:0,max:0},bonded:{min:0,max:0}},favourites:[],list:[],filteredList:[],validator:{}},getters:{},mutations:{SET_LOADING(t,e){t.loading=e},SET_LIST(t,e){console.debug("SET_LIST",e),t.list=e,t.updatedAt=new Date},SET_FILTERED_LIST(t,e){t.filteredList=e},SET_VALIDATOR(t,e){t.validator=e},SET_PAGINATION(t,e){t.pagination=e},SET_OPTIONS(t,e){t.options=e},SET_FILTER(t,e){t.filter=e},SET_SEARCH(t,e){t.search=e},TOGGLE_FAV(t,e){const a=t.favourites.findIndex((t=>t===e));a>-1?t.favourites=t.favourites.filter((t=>t!==e)):t.favourites.push(e)}},actions:{async init({dispatch:t}){await t("getList")},async loading({commit:t},e){t("SET_LOADING",e)},async setList({commit:t,dispatch:e},a){t("SET_LIST",a),e("filterList")},async filterList({commit:t}){const e=[];t("SET_FILTERED_LIST",e)},async paginate({commit:t},e){await t("SET_PAGINATION",e)},async handleOptions({commit:t},e){await t("SET_OPTIONS",e)},async handleFilter({commit:t},e){await t("SET_FILTER",e)},async setSearch({commit:t},e){await t("SET_SEARCH",e)},async setValidator({state:t,commit:e},a){let i=t.list.find((t=>t.stash===a));if(!i){console.debug("not in cache... axios direct");const t=await ei().get(`//api.metaspan.io/api/validator/${a}`);t?.data.validator&&(i=t.data.validator)}await e("SET_VALIDATOR",i)},async toggleFav({commit:t},e){await t("TOGGLE_FAV",e)}}};var ii=ai,si=a(3796);class ni{constructor(t){(0,si.Z)(this,"active",!1),(0,si.Z)(this,"commission",0),(0,si.Z)(this,"councilStake",0),(0,si.Z)(this,"councilVotes",[]),(0,si.Z)(this,"democracyVoteCount",0),(0,si.Z)(this,"democracyVotes",[]),(0,si.Z)(this,"discoveredAt",0),(0,si.Z)(this,"faults",[]),(0,si.Z)(this,"stash",""),(0,si.Z)(this,"score",{total:0}),(0,si.Z)(this,"rank",0),(0,si.Z)(this,"identity",{}),(0,si.Z)(this,"location",""),(0,si.Z)(this,"name",""),(0,si.Z)(this,"nominatedAt",0),(0,si.Z)(this,"onlineSince",0),(0,si.Z)(this,"unclaimedEras",[]),(0,si.Z)(this,"valid",!1),(0,si.Z)(this,"validity",[]),this.active=!!t.active,this.commission=t.commission||0,this.councilStake=t.councilStake||0,this.councilVotes=t.councilVotes||[],this.democracyVoteCount=t.democracyVoteCount||0,this.democracyVotes=t.democracyVotes,this.discoveredAt=t.discoveredAt||0,this.faults=t.faults||[],this.stash=t.stash||"",this.score=t.score||{total:0},this.rank=t.rank||0,this.identity=t.identity||{},this.location=t.location||"",this.name=t.name||"",this.nominatedAt=t.nominatedAt||0,this.onlineSince=t.onlineSince||0,this.unclaimedEras=t.unclaimedEras||[],this.valid=!!t.valid,this.validity=t.validity||[],this.setValid()}setValid(t){t&&(this.validity=t),this.valid=0===this.validity.filter((t=>!1===t.valid)).length}}var oi=a(1748);class ri{constructor(t){(0,si.Z)(this,"key",""),(0,si.Z)(this,"db",(0,oi.X3)("",1,{upgrade(t){t.createObjectStore("keyval")}})),this.key=t,this.db=(0,oi.X3)(t,1,{upgrade(t){t.createObjectStore("keyval")}})}getSync(t){return this.db.then((e=>{e.get("keyval",t).then((t=>t))}))}async get(t){return await(await this.db).get("keyval",t)}async set(t,e){return(await this.db).put("keyval",e,t)}async unset(t){return(await this.db).delete("keyval",t)}async keys(){return(await this.db).getAllKeys("keyval")}async getAll(){return(await this.db).getAll("keyval")}}class ci{constructor(t="metaspan.io"){(0,si.Z)(this,"dbName","metaspan.io"),(0,si.Z)(this,"idb",void 0),this.dbName=t,this.idb=new ri(t)}async saveState(t,e){console.debug("store/state-manager.ts: saveState()",t,e),e.initial||await this.idb.set(t,e)}async clearState(t){console.debug("store/state-manager.ts: clearState()",t),await this.idb.unset(t)}getStateSync(t,e){console.debug("store/state-manager.ts: getStateSync()",t);const a=this.idb.getSync(t);return Object.assign(e,a)}async getState(t,e){return console.debug("store/state-manager.ts: getState()",t),new Promise((a=>{let i=e,s=!1;this.idb.get(t).then((n=>{n&&n.chainId?(console.debug("store/state-manager.ts: getState(): restoring from idb()"),s=!0,i=Object.assign({},e,n)):(console.debug("store/state-manager.ts: getState(): using initialState"),i=Object.assign({},e),i.initial=!1),console.debug("store/state-manager.ts: getState() returns",t,s,i),a(i)}))}))}}const li=new ci("metaspan.io"),di="candidate",hi={initial:!0,chainId:"kusama",polkadot:{apiConnected:!1,updatedAt:b()().add(-1,"day").utc().format(),chainInfo:{},loading:!1,loadingTimeout:null,filtering:!1,pagination:{page:1,itemsPerPage:15},sort:{sort:"score",sortAsc:!1},search:"",filter:{valid:!1,active:!1,sort:"score",sortAsc:!0},options:{},ranges:{score:{min:0,max:0},rank:{min:0,max:0},bonded:{min:0,max:0}},favourites:["16ce9zrmiuAtdi9qv1tuiQ1RC1xR6y6NgnBcRtMoQeAobqpZ"],list:[],filteredList:[],candidate:new ni({stash:"loading",valid:!1,validity:[{valid:!1}]})},kusama:{apiConnected:!1,updatedAt:b()().add(-1,"day").utc().format(),chainInfo:{},loading:!1,loadingTimeout:null,filtering:!1,pagination:{page:1,itemsPerPage:15},sort:{sort:"score",sortAsc:!1},search:"",filter:{valid:!1,active:!1,sort:"score",sortAsc:!1},options:{},ranges:{score:{min:0,max:0},rank:{min:0,max:0},bonded:{min:0,max:0}},favourites:["HyLisujX7Cr6D7xzb6qadFdedLt8hmArB6ZVGJ6xsCUHqmx","FAR296Aqh9i8W5bi7BS7a8Bkhbw5LX5xCXP22c1Jvc2tM5v"],list:[],filteredList:[],candidate:new ni({valid:!1,validity:[{valid:!1}]})}};const ui={namespaced:!0,modules:{},state:li.getStateSync(di,hi),getters:{apiConnected(t){return t[t.chainId]?.apiConnected||!1},chainInfo(t){return t[t.chainId].chainInfo||{}},candidate(t){return t[t.chainId]?.candidate||{}},filteredList(t){return console.debug("candidate.ts: getters.filteredList()",t.chainId),t[t.chainId]?.filteredList||[]},favourites(t){return t[t.chainId]?.favourites||[]},filter(t){return t[t.chainId]?.filter||{}},filtering(t){return t[t.chainId]?.filtering||!1},loading(t){return t[t.chainId]?.loading||!1},options(t){return t[t.chainId]?.options||{}},ranges(t){return t[t.chainId]?.ranges||[]},updatedAt(t){return b()(t[t.chainId]?.updatedAt)}},mutations:{async INIT(t,e){console.debug("store/modules/candidate.ts: mutations.INIT()",t,e),t=Object.assign(t,e),t[t.chainId].loading=!1},SET_LOADING(t,{loading:e}){console.debug("store/modules/candidate.ts: mutations.SET_LOADING()",t.chainId,e),t[t.chainId]?t[t.chainId].loading=e:console.warn("state[state.chainId] is",t[t.chainId])},SET_INITIAL(t,e){console.debug("store/modules/candidate.ts: mutations.SET_INITIAL()",e),t.initial=e},async SET_CHAIN(t,e){console.debug("store/modules/candidate.ts: mutations.SET_CHAIN()",e),t.chainId=e,t.initial||await li.saveState(di,t)},API_STATUS(t,{connected:e,chainId:a}){t[a].apiConnected=e},async SET_FILTERING(t,{value:e}){t[t.chainId].filtering=e,await li.saveState(di,t)},async SET_LIST(t,{list:e}){console.debug("candidate.ts: mutations.SET_LIST()",t.chainId,e);let a=[],s=[];i["default"].set(t[t.chainId],"list",e.map((t=>new ni(t)))),t[t.chainId].updatedAt=b()().utc().format(),s=e.map((t=>t.rank)).sort(((t,e)=>t-e)),a=[...new Set(s)],a=a.slice(.055*a.length,.854*a.length),t[t.chainId].ranges.rank={min:Math.min(...a),max:Math.max(...a)},t[t.chainId].ranges.score=e.map((t=>t.score?.total)).reduce((function(t,e){return e?{min:Math.min(t.min,e),max:Math.max(t.max,e)}:t}),{min:50,max:0}),await li.saveState(di,t)},async SET_FILTERED_LIST(t,{flist:e}){i["default"].set(t[t.chainId],"filteredList",e),await li.saveState(di,t)},async SET_CANDIDATE(t,{model:e}){console.debug("SET_CANDIDATE",e),t[t.chainId].candidate=e,await li.saveState(di,t)},async SET_PAGINATION(t,{pagination:e}){console.debug("candidate.ts: SET_PAGINATION",t.chainId,e),t[t.chainId].pagination=e,await li.saveState(di,t)},async SET_OPTIONS(t,{options:e}){t[t.chainId].options=e,await li.saveState(di,t)},async SET_FILTER(t,{filter:e}){console.debug("store/modules/candidate.ts: SET_FILTER()",t.chainId,e),Object.assign(t[t.chainId].filter,e),await li.saveState(di,t)},async SET_SEARCH(t,{search:e}){t[t.chainId].search=e,await li.saveState(di,t)},async TOGGLE_FAV(t,{stash:e}){const a=t[t.chainId].favourites.findIndex((t=>t===e));a>-1?t[t.chainId].favourites=t[t.chainId].favourites.filter((t=>t!==e)):t[t.chainId].favourites.push(e),await li.saveState(di,t)}},actions:{async init({commit:t,dispatch:e,state:a,rootState:i}){console.debug("store/modules/candidate.ts: init()",i.chainId,a),await t("SET_CHAIN",i.chainId),await t("INIT",a),await t("SET_INITIAL",!1)},async setChain({commit:t,dispatch:e},a){console.debug("store/modules/candidate.ts: setChain()",a),await t("SET_CHAIN",a),await e("getList")},async apiClose({dispatch:t}){await t("apiStatus",{connected:!1,chain:"kusama"}),await t("apiStatus",{connected:!1,chain:"polkadot"})},async apiStatus({commit:t},{connected:e,chain:a}){await t("API_STATUS",{connected:e,chain:a})},async getList({rootState:t,state:e,commit:a,dispatch:i}){console.debug("store/modules/candidate.ts: getList()",e.chainId,"initial:",e.initial);let s=[];if(!e[e.chainId]?.updatedAt||b()().diff(b()(e[e.chainId]?.updatedAt),"seconds")>60){console.debug("store/modules/candidate.ts: getList(): reloading list from api",e.chainId);try{let i=null;await a("SET_LOADING",{loading:!0}),i=await ei().get(`${t.baseUrl}/api/${e.chainId}/candidate`),s=i.data?.candidates?i.data.candidates:i.data,s?await a("SET_LIST",{list:s}):(console.debug("there is no data"),console.debug(i))}catch(n){await a("SET_LOADING",{loading:!1}),console.debug("OOPS, caught an error"),console.error(n)}finally{await a("SET_LOADING",{loading:!1})}await i("filterList")}else i("addAlert",{id:b()().valueOf(),type:"warning",title:"Cache age < 60 seconds",text:"Serving from local cache"},{root:!0}),console.log(`age of cache: ${b()().diff(b()(e[e.chainId].updatedAt),"seconds")} seconds`)},async paginate({state:t,commit:e},{pagination:a}){console.debug("store/modules/candidate.ts: paginate()",a),await e("SET_PAGINATION",{pagination:a});const i=Object.assign(t[t.chainId].options,a);await e("SET_OPTIONS",{options:i})},async handleOptions({commit:t,dispatch:e},{options:a}){await t("SET_OPTIONS",{options:a}),await e("filterList")},async handleFilter({commit:t,dispatch:e},{filter:a}){console.debug("store/modules/candidate.ts: actions.handleFilter()",{filter:a}),await t("SET_FILTER",{filter:a}),await e("filterList")},async setSearch({commit:t,dispatch:e},{search:a}){await t("SET_SEARCH",{search:a}),await e("filterList")},async filterList({state:t,commit:e}){console.debug("store/modules/candidate.ts: filterList()"),e("SET_FILTERING",{value:!0});const a=t[t.chainId].filter,i={sort:a.sort,sortAsc:a.sortAsc},s=t[t.chainId].search,n=t[t.chainId].favourites;console.debug("store/modules/candidate.ts: filter, sort, search",a,i,s,n);const o=t[t.chainId].list.filter(((t,e)=>!(a.favourite&&!n.includes(t.stash)||a.valid&&!t.valid||a.active&&!t.active||a.rank&&!(t.rank>a.rank)||a.score&&!(t.score.total>a.score))&&!!(""===s||t.name.toLowerCase().includes(s.toLowerCase())||t.identity?.name?.toLowerCase().includes(s.toLowerCase())||t.stash.includes(s)))).sort(((t,e)=>{const a=i.sort,s=i.sortAsc;return"name"===a?s?String(t.name).localeCompare(e.name):String(e.name).localeCompare(t.name):s?t[a]-e[a]:e[a]-t[a]}));e("SET_FILTERED_LIST",{flist:o}),e("SET_FILTERING",{value:!1})},async setCandidate({rootState:t,state:e,commit:a},{chainId:i,stash:s}){console.debug("store/modules/candidate.ts: setCandidate()",i,s);let n=e[i].list.find((t=>t.stash===s));if(!n){console.debug("not in cache... axios direct"),await a("SET_LOADING",{chainId:i,loading:!0});const e=await ei().get(`${t.baseUrl}/api/${i}/candidate/${s}`);e?.data?n=e.data:console.warn("API ERROR",e),await a("SET_LOADING",{chainId:i,loading:!1})}await a("SET_CANDIDATE",{chainId:i,model:n})},async setLoading({commit:t},{chain:e,value:a}){console.debug("store/modules/candidate.ts: actions.setLoading()",a),await t("SET_LOADING",{chain:e,loading:a})},async toggleFav({commit:t},{chain:e,stash:a}){await t("TOGGLE_FAV",{chain:e,stash:a})},async resetCache(){console.debug("store/modules/candidate.ts: actions.resetCache()"),li.clearState(di)}}};var mi=ui;const vi=new ci("metaspan.io"),pi="pool",gi={initial:!0,chainId:"kusama",kusama:{apiConnected:!1,updatedAt:null,loading:!1,pagination:{page:1,itemsPerPage:15},options:{page:1,itemsPerPage:10,sortBy:"name",sortDesc:!1},search:"",filter:{valid:!1,active:!1},favourites:[],list:[],filteredList:[],pool:{}},polkadot:{apiConnected:!1,updatedAt:null,loading:!1,pagination:{page:1,itemsPerPage:15},options:{page:1,itemsPerPage:10,sortBy:"name",sortDesc:!1},search:"",filter:{valid:!1,active:!1},favourites:[],list:[],filteredList:[],pool:{}}};const fi={namespaced:!0,modules:{},state:vi.getStateSync(pi,gi),getters:{list(t){return console.debug("store/modules/pool.ts: getters.list()",t.chainId),t[t.chainId].list}},mutations:{async SET_CHAIN(t,{chainId:e}){console.debug("store/modules/pool.ts: SET_CHAIN()",e),t.chainId=e,t.initial||await vi.saveState(pi,t)},SET_LOADING(t,e){t[t.chainId].loading=e},API_STATUS(t,{connected:e,chainId:a}){t.apiConnected=e},async ADD_POOL(t,e){console.debug("store/modules/pool.ts: ADD_POOL()",t.chainId,e.id);const a=t[t.chainId].list.findIndex((t=>t.id===e.id));a>-1?t[t.chainId].list[a]=e:t[t.chainId].list.push(e),await vi.saveState(pi,t)},async SET_LIST(t,e){console.debug("SET_LIST",e),t[t.chainId].list=e,t[t.chainId].updatedAt=new Date,await vi.saveState(pi,t)},async SET_FILTERED_LIST(t,e){t[t.chainId].filteredList=e,await vi.saveState(pi,t)},async SET_POOL(t,e){console.debug("store/modules/pool.ts: SET_POOL()",e),i["default"].set(t,"pool",e),await vi.saveState(pi,t)},async SET_PAGINATION(t,e){t[t.chainId].pagination=e,await vi.saveState(pi,t)},async SET_OPTIONS(t,e){t[t.chainId].options=e,await vi.saveState(pi,t)},async SET_FILTER(t,e){t[t.chainId].filter=e,await vi.saveState(pi,t)},async SET_SEARCH(t,e){t[t.chainId].search=e,await vi.saveState(pi,t)},async TOGGLE_FAV(t,e){const a=t[t.chainId].favourites.findIndex((t=>t===e));a>-1?t[t.chainId].favourites=t[t.chainId].favourites.filter((t=>t!==e)):t[t.chainId].favourites.push(e),await vi.saveState(pi,t)}},actions:{async init({dispatch:t}){},async setChainId({commit:t},e){await t("SET_CHAIN",{chainId:e})},async apiClose({dispatch:t}){await t("apiStatus",{connected:!1,chainId:"kusama"}),await t("apiStatus",{connected:!1,chainId:"polkadot"})},async apiStatus({commit:t},{connected:e,chainId:a}){await t("API_STATUS",{connected:e,chainId:a})},async loading({commit:t},e){t("SET_LOADING",e)},async addPool({commit:t},e){await t("ADD_POOL",e)},async setList({commit:t,dispatch:e},a){await t("SET_LIST",a),await e("filterList")},async setIds({state:t,commit:e,dispatch:a},i){const s=t.list.map((t=>{const e=i.find((e=>e.id===t.id));return e&&(t.display=e.display),t}));e("SET_LIST",s),a("filterList")},async filterList({commit:t}){const e=[];await t("SET_FILTERED_LIST",e)},async paginate({commit:t},e){await t("SET_PAGINATION",e)},async handleOptions({commit:t},e){await t("SET_OPTIONS",e)},async handleFilter({commit:t},e){await t("SET_FILTER",e)},async setSearch({commit:t},e){await t("SET_SEARCH",e)},async setPool({state:t,commit:e},{id:a}){console.debug("store/modules/pool.ts: setPool()",a);const i=t[t.chainId].list.find((t=>t.id===a));await e("SET_POOL",i)},async toggleFav({commit:t},e){await t("TOGGLE_FAV",e)},async resetCache(){console.debug("store/modules/pool.ts: actions.resetCache()"),await vi.clearState(pi)}}};var _i=fi;const bi=new ci("metaspan.io"),Ii={kusama:{id:"kusama",name:"Kusama",icon:"assets/kusama-logo.png"},polkadot:{id:"polkadot",name:"Polkadot",icon:"assets/polkadot-logo.png"}};i["default"].use(o.ZP);var wi=new o.ZP.Store({state:{initial:!0,loading:!1,baseUrl:"https://api.metaspan.io",dark:!1,showSettingsDialog:!1,showNavBar:!1,alerts:[],chains:Ii,chainId:"kusama"},mutations:{SET_INITIAL(t,e){t.initial=e},SET_LOADING(t,e){t.loading=e},SET_DARK(t,e){t.dark=e},SET_SHOW_SETTINGS_DIALOG(t,e){t.showSettingsDialog=e},SET_SHOW_NAVBAR(t,e){t.showNavBar=e},ADD_ALERT(t,e){t.alerts.push(e)},CLEAR_ALERT(t,e){t.alerts=t.alerts.filter((t=>t.id!==e.id))},async SET_CHAIN(t,e){t.chainId=e,bi.saveState("index",t)}},actions:{async init({state:t,dispatch:e,commit:a}){await a("SET_LOADING",!0),await e("setChain",t.chainId),await e("substrate/init",{},{root:!0}),await e("candidate/init",{},{root:!0}),await e("pool/init",{},{root:!0}),await a("SET_INITIAL",!1),await a("SET_LOADING",!1)},setLoading({commit:t},e){t("SET_LOADING",e)},setDark({commit:t},e){t("SET_DARK",e)},setShowSettingsDialog({commit:t},e){t("SET_SHOW_SETTINGS_DIALOG",e)},addAlert({commit:t},e){t("ADD_ALERT",e)},clearAlert({commit:t},e){t("CLEAR_ALERT",e)},showNavBar({commit:t},e){t("SET_SHOW_NAVBAR",e)},toggleNavBar({commit:t,state:e}){t("SET_SHOW_NAVBAR",!e.showNavBar)},resetCache({dispatch:t}){console.debug("store/index.ts: actions.resetCache()"),t("candidate/resetCache",{},{root:!0}),t("pool/resetCache",{},{root:!0})},async setChain({commit:t,dispatch:e},a){await t("SET_CHAIN",a),await e("substrate/setChain",a),await e("candidate/setChain",a),await e("pool/setChainId",a)},async apiClose({dispatch:t}){await t("substrate/apiClose"),await t("candidate/apiClose"),await t("pool/apiClose")},async apiConnected({dispatch:t},{chain:e}){await t("substrate/apiConnected",{chain:e}),await t("candidate/apiStatus",{connected:!0,chain:e}),await t("pool/apiStatus",{connected:!0,chain:e})},async apiDisconnected({dispatch:t},{chain:e}){await t("substrate/apiDisconnected",{chain:e}),await t("candidate/apiStatus",{connected:!1,chain:e}),await t("pool/apiStatus",{connected:!1,chain:e})}},modules:{substrate:Ua,validator:ii,candidate:mi,polkadot:Xa,pool:_i}}),yi=a(8209),ki=a.n(yi);a(243);i["default"].use(ki());var Si=new(ki())({}),xi=a(8941),Ci=a(178),Ti=a(9131),Ei=a(1794),Ai=a(3892);const $i=new Ci.u({uri:"https://gql.metaspan.io"});console.log($i);const ji=(0,Ti.q)((({graphQLErrors:t,networkError:e})=>{t&&t.map((({message:t,locations:e,path:a})=>console.log(`[GraphQL error]: Message: ${t}, Location: ${e}, Path: ${a}`))),e&&console.log(`[Network error]: ${e}`)})),Di=new xi.fe({link:ji.concat($i),cache:new Ei.h4,connectToDevTools:!0});i["default"].use(Ai.ZP);const Li=new Ai.ZP({defaultClient:Di}),Ni={shortLength:5};var Oi={shortStash(t){return t.slice(0,Ni.shortLength)+"..."+t.slice(-Ni.shortLength)}};const Pi={polkadot:{parity:"wss://rpc.polkadot.io",onFinality:"wss://polkadot.api.onfinality.io/public-ws",dwellir:"wss://polkadot-rpc.dwellir.com"},kusama:{onFinality:"wss://kusama.api.onfinality.io/public-ws",parity:"wss://kusama-rpc.polkadot.io",dwellir:"wss://kusama-rpc.dwellir.com"},parallel:{onFinality:"wss://parallel.api.onfinality.io/public-ws"}};class Fi{constructor(t){(0,si.Z)(this,"config",{lite:!1,chain:"kusama",endpoint:"onFinality"}),(0,si.Z)(this,"kusama",void 0),(0,si.Z)(this,"polkadot",void 0),this.config={...this.config,...t}}async createWsProvider(t="kusama",e="parity"){if(console.debug("plugins/substrate.ts: createWsProvider()",t,e),this[t])return console.debug("plugins/substrate.ts: we already have api for",t),await this[t].isReady,this[t];const a=new Ka.U(Pi[t][e]);a.on("error",(async e=>{console.warn(`plugins/substrate.ts: on('error', ${t})`),await wi.dispatch("apiError",{chainId:t,error:e}),console.error(e)})),a.on("connected",(async()=>{console.debug(`plugins/substrate.ts: on('connected', ${t})`),await wi.dispatch("substrate/apiConnected",t)})),a.on("disconnected",(async e=>{console.debug(`plugins/substrate.ts: on('disconnected', ${t})`),console.debug(e),await wi.dispatch("substrate/apiDisconnected",t)})),console.debug("plugins/substrate.ts: about to connect",t),await a.connect();const i=await Ja.G.create({provider:a});return await i.isReady,console.debug(`subsrate.ts: createWsProvider(${t}) api isReady`),this[t]=i,i}async connect(t="kusama"){const e=await this.createWsProvider(t);this[t]=e,console.debug(`plugins/substrate.ts: connect(${t}): we have an api...`);const a=await this.chainInfo(t);return a}async chainInfo(t){console.debug("plugins/substrate.ts: chainInfo()",t);const e=await this[t].registry.getChainProperties();return console.debug(`plugins/substrate.ts: chainInfo(${t})`,e),e}}i["default"].prototype.$utils=Oi,i["default"].prototype.$substrate=new Fi({lite:!1,endpoint:"dwellir"}),i["default"].config.productionTip=!0,new i["default"]({router:Ha,store:wi,vuetify:Si,apolloProvider:Li,render:t=>t(K)}).$mount("#app")},666:function(t,e,a){"use strict";t.exports=a.p+"img/kusama-logo.3547ecb6.png"},3395:function(t,e,a){"use strict";t.exports=a.p+"img/polkadot-logo.57a77656.png"},5856:function(){},6601:function(){}},e={};function a(i){var s=e[i];if(void 0!==s)return s.exports;var n=e[i]={id:i,loaded:!1,exports:{}};return t[i].call(n.exports,n,n.exports,a),n.loaded=!0,n.exports}a.m=t,function(){var t=[];a.O=function(e,i,s,n){if(!i){var o=1/0;for(d=0;d<t.length;d++){i=t[d][0],s=t[d][1],n=t[d][2];for(var r=!0,c=0;c<i.length;c++)(!1&n||o>=n)&&Object.keys(a.O).every((function(t){return a.O[t](i[c])}))?i.splice(c--,1):(r=!1,n<o&&(o=n));if(r){t.splice(d--,1);var l=s();void 0!==l&&(e=l)}}return e}n=n||0;for(var d=t.length;d>0&&t[d-1][2]>n;d--)t[d]=t[d-1];t[d]=[i,s,n]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){var t,e=Object.getPrototypeOf?function(t){return Object.getPrototypeOf(t)}:function(t){return t.__proto__};a.t=function(i,s){if(1&s&&(i=this(i)),8&s)return i;if("object"===typeof i&&i){if(4&s&&i.__esModule)return i;if(16&s&&"function"===typeof i.then)return i}var n=Object.create(null);a.r(n);var o={};t=t||[null,e({}),e([]),e(e)];for(var r=2&s&&i;"object"==typeof r&&!~t.indexOf(r);r=e(r))Object.getOwnPropertyNames(r).forEach((function(t){o[t]=function(){return i[t]}}));return o["default"]=function(){return i},a.d(n,o),n}}(),function(){a.d=function(t,e){for(var i in e)a.o(e,i)&&!a.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){a.f={},a.e=function(t){return Promise.all(Object.keys(a.f).reduce((function(e,i){return a.f[i](t,e),e}),[]))}}(),function(){a.u=function(t){return"js/about.3d9837d8.js"}}(),function(){a.miniCssF=function(t){}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.hmd=function(t){return t=Object.create(t),t.children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t}}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="validator-dashboard:";a.l=function(i,s,n,o){if(t[i])t[i].push(s);else{var r,c;if(void 0!==n)for(var l=document.getElementsByTagName("script"),d=0;d<l.length;d++){var h=l[d];if(h.getAttribute("src")==i||h.getAttribute("data-webpack")==e+n){r=h;break}}r||(c=!0,r=document.createElement("script"),r.charset="utf-8",r.timeout=120,a.nc&&r.setAttribute("nonce",a.nc),r.setAttribute("data-webpack",e+n),r.src=i),t[i]=[s];var u=function(e,a){r.onerror=r.onload=null,clearTimeout(m);var s=t[i];if(delete t[i],r.parentNode&&r.parentNode.removeChild(r),s&&s.forEach((function(t){return t(a)})),e)return e(a)},m=setTimeout(u.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=u.bind(null,r.onerror),r.onload=u.bind(null,r.onload),c&&document.head.appendChild(r)}}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){a.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){a.p="/"}(),function(){var t={143:0};a.f.j=function(e,i){var s=a.o(t,e)?t[e]:void 0;if(0!==s)if(s)i.push(s[2]);else{var n=new Promise((function(a,i){s=t[e]=[a,i]}));i.push(s[2]=n);var o=a.p+a.u(e),r=new Error,c=function(i){if(a.o(t,e)&&(s=t[e],0!==s&&(t[e]=void 0),s)){var n=i&&("load"===i.type?"missing":i.type),o=i&&i.target&&i.target.src;r.message="Loading chunk "+e+" failed.\n("+n+": "+o+")",r.name="ChunkLoadError",r.type=n,r.request=o,s[1](r)}};a.l(o,c,"chunk-"+e,e)}},a.O.j=function(e){return 0===t[e]};var e=function(e,i){var s,n,o=i[0],r=i[1],c=i[2],l=0;if(o.some((function(e){return 0!==t[e]}))){for(s in r)a.o(r,s)&&(a.m[s]=r[s]);if(c)var d=c(a)}for(e&&e(i);l<o.length;l++)n=o[l],a.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return a.O(d)},i=self["webpackChunkvalidator_dashboard"]=self["webpackChunkvalidator_dashboard"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=a.O(void 0,[998],(function(){return a(7278)}));i=a.O(i)})();
//# sourceMappingURL=app.7522e65f.js.map